<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>ç³»ç»ŸçŠ¶æ€</title><script type="module">var __webpack_modules__ = {
  42: (__unused_webpack_module, exports) => {
    var __webpack_unused_export__;
    __webpack_unused_export__ = {
      value: true
    };
    exports.A = (sfc, props) => {
      const target = sfc.__vccOpts || sfc;
      for (const [key, val] of props) {
        target[key] = val;
      }
      return target;
    };
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

var __webpack_exports__ = {};

const external_Vue_namespaceObject = Vue;

const ERA_VARIABLE_PATH = {
  MAIN_FONT_PERCENT: "config.ui.mainFontPercent",
  FONT_SCALE_STEP_PCT: "config.ui.fontScaleStepPct",
  UI_THEME: "config.ui.theme",
  MAP_ASCII: "world.map_ascii",
  MAP_GRAPH: "world.map_graph",
  FALLBACK_PLACE: "world.fallbackPlace",
  INCIDENT_IMMEDIATE_TRIGGER: "config.incident.immediate_trigger",
  INCIDENT_RANDOM_POOL: "config.incident.random_pool",
  RUNTIME_PREFIX: "runtime.",
  INCIDENT_COOLDOWN: "config.incident.cooldown",
  TIME_PROGRESS: "ä¸–ç•Œ.timeProgress",
  FESTIVALS_LIST: "festivals_list",
  NEWS_TEXT: "æ–‡æ–‡æ–°é—»",
  EXTRA_MAIN: "é™„åŠ æ­£æ–‡",
  USER_LOCATION: "user.æ‰€åœ¨åœ°åŒº",
  USER_HOME: "user.å±…ä½åœ°åŒº",
  CHARS: "chars",
  CHAR_HOME: "å±…ä½åœ°åŒº",
  CHAR_LOCATION: "æ‰€åœ¨åœ°åŒº",
  CHAR_AFFECTION: "å¥½æ„Ÿåº¦",
  USER_DATA: "user",
  USER_EVENTS: "é‡è¦ç»å†",
  USER_RELATIONSHIPS: "äººé™…å…³ç³»",
  SKIP_VISIT_HUNTERS: "config.meetStuff.skipVisitHunters",
  SKIP_SLEEP_HUNTERS: "config.nightStuff.skipSleepHunters",
  UI_RIBBON_STEP: "config.ui.ribbonStep",
  AFFECTION_STAGES: "config.affection.affectionStages",
  AFFECTION_LOVE_THRESHOLD: "config.affection.loveThreshold",
  AFFECTION_HATE_THRESHOLD: "config.affection.hateThreshold",
  CONFIG_ROOT: "config"
};

const PROJECT_NAME = "å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢";

const DEBUG_CONFIG_LS_KEY = "gsko_era_debug_config";

let enabledPatterns = [];

let disabledPatterns = [];

function loadDebugConfig() {
  try {
    const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{"enabled":[],"disabled":[]}';
    const config = JSON.parse(configStr);
    const toRegex = p => new RegExp(`^${p.replace(/\*/g, ".*?")}$`);
    enabledPatterns = (config.enabled || []).map(toRegex);
    disabledPatterns = (config.disabled || []).map(toRegex);
  } catch (e) {
    console.error(`ã€Š${PROJECT_NAME}-Logã€‹: åŠ è½½è°ƒè¯•é…ç½®å¤±è´¥ã€‚`, e);
    enabledPatterns = [];
    disabledPatterns = [];
  }
}

function isDebugEnabled(moduleName) {
  if (!moduleName) return false;
  if (disabledPatterns.some(re => re.test(moduleName))) {
    return false;
  }
  if (enabledPatterns.length === 0) {
    return false;
  }
  if (enabledPatterns.some(re => re.test(moduleName))) {
    return true;
  }
  return false;
}

function updateConfig(newConfig) {
  const uniqueConfig = {
    enabled: [ ...new Set(newConfig.enabled) ],
    disabled: [ ...new Set(newConfig.disabled) ]
  };
  globalThis.localStorage?.setItem(DEBUG_CONFIG_LS_KEY, JSON.stringify(uniqueConfig));
  loadDebugConfig();
  console.log(`%cã€Š${PROJECT_NAME}-Logã€‹è°ƒè¯•æ¨¡å¼å·²æ›´æ–°ã€‚`, "color: #3498db; font-weight: bold;", {
    "å¯ç”¨ (Enabled)": uniqueConfig.enabled,
    "ç¦ç”¨ (Disabled)": uniqueConfig.disabled
  });
}

loadDebugConfig();

if (typeof globalThis !== "undefined") {
  const eraDebug = {
    add(pattern) {
      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{"enabled":[],"disabled":[]}';
      const config = JSON.parse(configStr);
      const enabled = new Set(config.enabled || []);
      const disabled = new Set(config.disabled || []);
      enabled.add(pattern);
      disabled.delete(pattern);
      updateConfig({
        enabled: Array.from(enabled),
        disabled: Array.from(disabled)
      });
    },
    remove(pattern) {
      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{"enabled":[],"disabled":[]}';
      const config = JSON.parse(configStr);
      const enabled = new Set(config.enabled || []);
      const disabled = new Set(config.disabled || []);
      disabled.add(pattern);
      enabled.delete(pattern);
      updateConfig({
        enabled: Array.from(enabled),
        disabled: Array.from(disabled)
      });
    },
    status() {
      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{"enabled":[],"disabled":[]}';
      const config = JSON.parse(configStr);
      console.log(`%cã€Š${PROJECT_NAME}-Logã€‹å½“å‰è°ƒè¯•é…ç½®:`, "color: #3498db; font-weight: bold;", config);
    },
    clear() {
      updateConfig({
        enabled: [],
        disabled: []
      });
    }
  };
  globalThis.eraDebug = eraDebug;
}

const logContext = {
  mk: ""
};

class Logger {
  moduleName;
  constructor(moduleName) {
    this.moduleName = moduleName || this._getModuleNameFromStack() || "unknown";
  }
  _getModuleNameFromStack() {
    try {
      const stack = (new Error).stack || "";
      const callerLine = stack.split("\n").find(line => (line.includes(`/src/${PROJECT_NAME}/`) || line.includes(`/dist/${PROJECT_NAME}/`) || line.includes(`\\src\\${PROJECT_NAME}\\`) || line.includes(`\\dist\\${PROJECT_NAME}\\`)) && !line.includes("/utils/log.ts"));
      if (!callerLine) {
        return null;
      }
      const match = callerLine.match(new RegExp(`(src|dist)[\\\\/]${PROJECT_NAME}[\\\\/]([^?:]+)`));
      if (!match || !match[2]) {
        return null;
      }
      const path = match[2];
      return path.replace(/\\/g, "/").replace(/\.(vue|ts|js)$/, "").replace(/\/index$/, "");
    } catch (e) {
      console.error(`ã€Š${PROJECT_NAME}-Log-Debugã€‹: è§£ææ¨¡å—åæ—¶å‘ç”Ÿæ„å¤–é”™è¯¯ã€‚`, e);
      return null;
    }
  }
  formatMessage(funcName, message) {
    const mkString = logContext.mk ? `ï¼ˆ${logContext.mk}ï¼‰` : "";
    return `ã€Š${PROJECT_NAME}ã€‹${mkString}ã€Œ${this.moduleName}ã€ã€${funcName}ã€‘${String(message)}`;
  }
  debug(funcName, message, obj) {
    if (!isDebugEnabled(this.moduleName)) {
      return;
    }
    const formattedMessage = this.formatMessage(funcName, message);
    if (obj !== undefined) {
      console.debug(formattedMessage, obj);
    } else {
      console.debug(formattedMessage);
    }
  }
  log(funcName, message, obj) {
    const formattedMessage = this.formatMessage(funcName, message);
    if (obj !== undefined) {
      console.log(`%c${formattedMessage}`, "color: #3498db;", obj);
    } else {
      console.log(`%c${formattedMessage}`, "color: #3498db;");
    }
  }
  warn(funcName, message, obj) {
    const formattedMessage = this.formatMessage(funcName, message);
    if (obj !== undefined) {
      console.warn(`%c${formattedMessage}`, "color: #f39c12;", obj);
    } else {
      console.warn(`%c${formattedMessage}`, "color: #f39c12;");
    }
  }
  error(funcName, message, errorObj) {
    const formattedMessage = this.formatMessage(funcName, message);
    if (errorObj !== undefined) {
      console.error(`%c${formattedMessage}`, "color: #e74c3c; font-weight: bold;", errorObj);
    } else {
      console.error(`%c${formattedMessage}`, "color: #e74c3c; font-weight: bold;");
    }
  }
}

const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/utils/format");

function firstVal(x) {
  return Array.isArray(x) ? x.length ? x[0] : "" : x;
}

function get(obj, path, fallback = "") {
  try {
    const ks = Array.isArray(path) ? path : String(path).split(".");
    let cur = obj;
    for (const k of ks) {
      if (!cur || typeof cur !== "object" || !(k in cur)) {
        logger.debug("get", "æœªæ‰¾åˆ°é”®ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚", {
          è·¯å¾„: String(path),
          ç¼ºå¤±é”®: String(k),
          é»˜è®¤å€¼: fallback
        });
        return fallback;
      }
      cur = cur[k];
    }
    const v = firstVal(cur);
    if (v == null) {
      logger.debug("get", "è·¯å¾„å­˜åœ¨ä½†å€¼ä¸ºç©º(null/undefined)ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚", {
        è·¯å¾„: String(path),
        é»˜è®¤å€¼: fallback
      });
      return fallback;
    }
    return v;
  } catch (e) {
    logger.error("get", "å¼‚å¸¸ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚", {
      è·¯å¾„: String(path),
      å¼‚å¸¸: String(e),
      é»˜è®¤å€¼: fallback
    });
    return fallback;
  }
}

function format_text(id, raw) {
  const el = document.getElementById(id);
  if (!el) {
    logger.warn("text", "ç›®æ ‡å…ƒç´ ä¸å­˜åœ¨ï¼Œè·³è¿‡å†™å…¥ã€‚", {
      å…ƒç´ ID: id
    });
    return;
  }
  el.textContent = toText(raw);
}

function getRaw(obj, path, fallback = null) {
  try {
    const ks = Array.isArray(path) ? path : String(path).split(".");
    let cur = obj;
    for (const k of ks) {
      if (!cur || typeof cur !== "object" || !(k in cur)) {
        return fallback;
      }
      cur = cur[k];
    }
    return cur == null ? fallback : cur;
  } catch (e) {
    logger.error("getRaw", "å¼‚å¸¸ï¼Œä½¿ç”¨é»˜è®¤å€¼ã€‚", {
      è·¯å¾„: String(path),
      å¼‚å¸¸: String(e),
      é»˜è®¤å€¼: fallback
    });
    return fallback;
  }
}

function toText(v) {
  if (v == null || v === "") return "â€”";
  if (Array.isArray(v)) return v.length ? v.join("ï¼›") : "â€”";
  if (typeof v === "object") return JSON.stringify(v);
  return String(v);
}

function getStr(obj, path, fallback = "") {
  const rawValue = getRaw(obj, path, null);
  if (rawValue === null) {
    return toText(fallback);
  }
  return toText(rawValue);
}

const ContentBiovue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "ContentBio",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/ContentBio");
    const userEvents = (0, external_Vue_namespaceObject.ref)(null);
    const userRelationships = (0, external_Vue_namespaceObject.ref)(null);
    function update(statWithoutMeta) {
      const funcName = "update";
      logger.log(funcName, "æ¥æ”¶åˆ°æ›´æ–°æŒ‡ä»¤ï¼Œå¼€å§‹æ›´æ–°å±¥å†ä¸å…³ç³»", {
        statWithoutMeta
      });
      const userData = get(statWithoutMeta, ERA_VARIABLE_PATH.USER_DATA, {});
      logger.debug(funcName, "æå–çš„ç”¨æˆ·æ•°æ®", {
        userData
      });
      const eventsText = getStr(userData, ERA_VARIABLE_PATH.USER_EVENTS, "â€”");
      const relationshipsText = getStr(userData, ERA_VARIABLE_PATH.USER_RELATIONSHIPS, "â€”");
      logger.debug(funcName, "å¤„ç†åçš„å¾…æ˜¾ç¤ºæ–‡æœ¬", {
        eventsText,
        relationshipsText
      });
      if (userEvents.value) {
        userEvents.value.textContent = eventsText || "â€”";
        logger.log(funcName, "æˆåŠŸæ›´æ–°â€œé‡è¦ç»å†â€å†…å®¹ã€‚");
      } else {
        logger.warn(funcName, "æ— æ³•æ‰¾åˆ°â€œé‡è¦ç»å†â€çš„ DOM å…ƒç´  (userEvents ref)ï¼Œè¯·æ£€æŸ¥æ¨¡æ¿ã€‚");
      }
      if (userRelationships.value) {
        userRelationships.value.textContent = relationshipsText || "â€”";
        logger.log(funcName, "æˆåŠŸæ›´æ–°â€œäººé™…å…³ç³»â€å†…å®¹ã€‚");
      } else {
        logger.warn(funcName, "æ— æ³•æ‰¾åˆ°â€œäººé™…å…³ç³»â€çš„ DOM å…ƒç´  (userRelationships ref)ï¼Œè¯·æ£€æŸ¥æ¨¡æ¿ã€‚");
      }
    }
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ§­"), (0, external_Vue_namespaceObject.createTextVNode)("é‡è¦ç»å†") ], -1)), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      ref_key: "userEvents",
      ref: userEvents,
      class: "preserve-format"
    }, "â€”", 512), _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("hr", {
      class: "dashed"
    }, null, -1)), _cache[2] || (_cache[2] = (0, external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ¤"), (0, external_Vue_namespaceObject.createTextVNode)("äººé™…å…³ç³»") ], -1)), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      ref_key: "userRelationships",
      ref: userRelationships,
      class: "preserve-format"
    }, "â€”", 512) ]));
  }
});

var exportHelper = __webpack_require__(42);

const __exports__ = (0, exportHelper.A)(ContentBiovue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-7256a290" ] ]);

const ContentBio = __exports__;

const eraWriter_logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/utils/eraWriter");

function updateEraVariable(path, value) {
  const funcName = "updateEraVariable";
  if (!path || typeof path !== "string") {
    eraWriter_logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼špath æ— æ•ˆã€‚", {
      path
    });
    return;
  }
  const eventData = {
    path,
    value
  };
  try {
    eraWriter_logger.log(funcName, `å‡†å¤‡å‘é€ era:updateByPath äº‹ä»¶`, eventData);
    eventEmit("era:updateByPath", eventData);
  } catch (e) {
    eraWriter_logger.error(funcName, "å‘é€ era:updateByPath äº‹ä»¶æ—¶å‡ºç°å¼‚å¸¸", e);
  }
}

const StyledProgressBarvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "StyledProgressBar",
  props: {
    value: {},
    max: {},
    loveThreshold: {},
    hateThreshold: {},
    size: {}
  },
  setup(__props) {
    const props = __props;
    const barWidth = (0, external_Vue_namespaceObject.computed)(() => {
      const max = props.max || 100;
      return `${Math.min(Math.abs(props.value) / max * 100, 100)}%`;
    });
    const barClasses = (0, external_Vue_namespaceObject.computed)(() => {
      const classes = {
        "size-small": props.size === "small",
        "size-large": props.size !== "small",
        rtl: props.value < 0
      };
      if (props.hateThreshold !== undefined && props.value <= props.hateThreshold) {
        classes["very-hate"] = true;
      } else if (props.value < 0) {
        classes["negative"] = true;
      } else if (props.loveThreshold !== undefined && props.value >= props.loveThreshold) {
        classes["very-love"] = true;
      }
      return classes;
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", {
      class: (0, external_Vue_namespaceObject.normalizeClass)([ "styled-progress-bar", barClasses.value ])
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", {
      class: "val",
      style: (0, external_Vue_namespaceObject.normalizeStyle)({
        width: barWidth.value
      })
    }, null, 4) ], 2));
  }
});

const StyledProgressBar_exports_ = (0, exportHelper.A)(StyledProgressBarvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-0390f826" ] ]);

const StyledProgressBar = StyledProgressBar_exports_;

const _hoisted_1 = {
  class: "affection-display"
};

const _hoisted_2 = {
  class: "info-line"
};

const _hoisted_3 = {
  class: "aff-num"
};

const _hoisted_4 = {
  class: "aff-stage"
};

const AffectionDisplayvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "AffectionDisplay",
  props: {
    character: {},
    statWithoutMeta: {},
    runtime: {},
    size: {}
  },
  setup(__props) {
    const props = __props;
    const affectionValue = (0, external_Vue_namespaceObject.computed)(() => props.character?.["å¥½æ„Ÿåº¦"] || 0);
    const loveThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_LOVE_THRESHOLD, 100)));
    const hateThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_HATE_THRESHOLD, -100)));
    const affectionStage = (0, external_Vue_namespaceObject.computed)(() => {
      if (!props.runtime || !props.character?.name) return "â€”";
      return get(props.runtime, `chars.${props.character.name}.å¥½æ„Ÿåº¦ç­‰çº§`, "â€”");
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", _hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_2, [ _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "å¥½æ„Ÿåº¦ï¼š", -1)), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", _hoisted_3, (0, external_Vue_namespaceObject.toDisplayString)(affectionValue.value), 1), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", _hoisted_4, (0, external_Vue_namespaceObject.toDisplayString)(affectionStage.value), 1) ]), (0, 
    external_Vue_namespaceObject.createVNode)(StyledProgressBar, {
      value: affectionValue.value,
      "love-threshold": loveThreshold.value,
      "hate-threshold": hateThreshold.value,
      size: __props.size
    }, null, 8, [ "value", "love-threshold", "hate-threshold", "size" ]) ]));
  }
});

const AffectionDisplay_exports_ = (0, exportHelper.A)(AffectionDisplayvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-1ee196a8" ] ]);

const AffectionDisplay = AffectionDisplay_exports_;

const Particlevue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "Particle",
  props: {
    particleType: {},
    dx: {},
    dy: {},
    rot: {},
    delay: {},
    initialX: {},
    initialY: {}
  },
  emits: [ "destroy" ],
  setup(__props, {emit: __emit}) {
    const props = __props;
    const emit = __emit;
    const particleContent = (0, external_Vue_namespaceObject.computed)(() => props.particleType === "skull" ? "â˜ " : "â¤");
    const particleStyle = (0, external_Vue_namespaceObject.computed)(() => ({
      left: `${props.initialX}%`,
      top: `${props.initialY}%`,
      "--dx": `${props.dx}px`,
      "--dy": `${props.dy}px`,
      "--rot": `${props.rot}deg`,
      animationDelay: `${props.delay}s`
    }));
    (0, external_Vue_namespaceObject.onMounted)(() => {
      setTimeout(() => {
        emit("destroy");
      }, 1500);
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("span", {
      class: (0, external_Vue_namespaceObject.normalizeClass)([ "GensokyoOrigin-Particle", `GensokyoOrigin-Particle--${__props.particleType}` ]),
      style: (0, external_Vue_namespaceObject.normalizeStyle)(particleStyle.value)
    }, (0, external_Vue_namespaceObject.toDisplayString)(particleContent.value), 7));
  }
});

const Particle_exports_ = Particlevue_type_script_setup_true_lang_ts;

const Particle = Particle_exports_;

const ParticleEmittervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "particle-emitter-root"
};

const ParticleEmittervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "ParticleEmitter",
  props: {
    active: {
      type: Boolean
    },
    particleType: {},
    emissionRate: {}
  },
  setup(__props, {expose: __expose}) {
    const props = __props;
    const particles = (0, external_Vue_namespaceObject.ref)([]);
    let particleIdCounter = 0;
    const ticker = (0, external_Vue_namespaceObject.ref)(null);
    const createParticle = (type, delay = 0) => {
      particleIdCounter++;
      particles.value.push({
        id: particleIdCounter,
        type,
        initialX: 5 + Math.random() * 90,
        initialY: 10 + Math.random() * 80,
        dx: (Math.random() - .5) * 60,
        dy: -40 - Math.random() * 40,
        rot: (Math.random() - .5) * 40,
        delay
      });
    };
    const removeParticle = id => {
      particles.value = particles.value.filter(p => p.id !== id);
    };
    const startTicker = () => {
      if (ticker.value) return;
      const rate = props.emissionRate || 2;
      ticker.value = setInterval(() => {
        createParticle(props.particleType);
      }, 1e3 / rate);
    };
    const stopTicker = () => {
      if (ticker.value) {
        clearInterval(ticker.value);
        ticker.value = null;
      }
    };
    (0, external_Vue_namespaceObject.watch)(() => props.active, isActive => {
      if (isActive) {
        startTicker();
      } else {
        stopTicker();
      }
    }, {
      immediate: true
    });
    const burst = (type, count) => {
      for (let i = 0; i < count; i++) {
        createParticle(type, i * .05);
      }
    };
    (0, external_Vue_namespaceObject.onUnmounted)(() => {
      stopTicker();
    });
    __expose({
      burst
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", ParticleEmittervue_type_script_setup_true_lang_ts_hoisted_1, [ ((0, 
    external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(particles.value, p => ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createBlock)(Particle, {
      key: p.id,
      "particle-type": p.type,
      "initial-x": p.initialX,
      "initial-y": p.initialY,
      dx: p.dx,
      dy: p.dy,
      rot: p.rot,
      delay: p.delay,
      onDestroy: $event => removeParticle(p.id)
    }, null, 8, [ "particle-type", "initial-x", "initial-y", "dx", "dy", "rot", "delay", "onDestroy" ]))), 128)) ]));
  }
});

const ParticleEmitter_exports_ = ParticleEmittervue_type_script_setup_true_lang_ts;

const ParticleEmitter = ParticleEmitter_exports_;

const ContentOthersvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "others-toolbar",
  class: "GensokyoOrigin-ContentOthers-debug-toolbar",
  style: {
    margin: "6px 0 10px"
  }
};

const ContentOthersvue_type_script_setup_true_lang_ts_hoisted_2 = {
  class: "GensokyoOrigin-ContentOthers-debug-switch",
  title: "config.mvuLifeMeet.rules.incident.skipVisitHunters"
};

const ContentOthersvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "GensokyoOrigin-ContentOthers-debug-switch",
  title: "config.mvuLifeMeet.rules.incident.skipSleepHunters"
};

const ContentOthersvue_type_script_setup_true_lang_ts_hoisted_4 = [ "data-name" ];

const _hoisted_5 = {
  class: "GensokyoOrigin-ContentOthers-role-card-header"
};

const _hoisted_6 = {
  class: "GensokyoOrigin-ContentOthers-role-avatar"
};

const _hoisted_7 = {
  class: "GensokyoOrigin-ContentOthers-role-name"
};

const _hoisted_8 = {
  class: "GensokyoOrigin-ContentOthers-role-meta"
};

const _hoisted_9 = {
  class: "GensokyoOrigin-ContentOthers-role-body"
};

const _hoisted_10 = {
  key: 1,
  class: "GensokyoOrigin-ContentOthers-role-card"
};

const ContentOthersvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "ContentOthers",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/ContentOthers");
    const otherRoles = (0, external_Vue_namespaceObject.ref)([]);
    const stat = (0, external_Vue_namespaceObject.ref)({});
    const runtime = (0, external_Vue_namespaceObject.ref)({});
    const skipVisitHunters = (0, external_Vue_namespaceObject.ref)(false);
    const skipSleepHunters = (0, external_Vue_namespaceObject.ref)(false);
    const particleEmitters = (0, external_Vue_namespaceObject.ref)([]);
    const update = context => {
      const funcName = "update";
      const {statWithoutMeta, runtime: newRuntime} = context || {};
      logger.log(funcName, `å¼€å§‹æ›´æ–°â€œå…¶ä»–è§’è‰²â€ç»„ä»¶`, {
        statWithoutMeta,
        newRuntime
      });
      if (!statWithoutMeta || typeof statWithoutMeta !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ statWithoutMeta æ— æ•ˆã€‚");
        return;
      }
      stat.value = statWithoutMeta;
      runtime.value = newRuntime || {};
      try {
        skipVisitHunters.value = !!get(statWithoutMeta, ERA_VARIABLE_PATH.SKIP_VISIT_HUNTERS, false);
        skipSleepHunters.value = !!get(statWithoutMeta, ERA_VARIABLE_PATH.SKIP_SLEEP_HUNTERS, false);
      } catch (e) {
        logger.error(funcName, `æ›´æ–°å·¥å…·æ¡çŠ¶æ€æ—¶å‡ºé”™`, e);
      }
      try {
        const uLoc = String(get(statWithoutMeta, ERA_VARIABLE_PATH.USER_LOCATION, "")).trim();
        let chars = get(statWithoutMeta, ERA_VARIABLE_PATH.CHARS, {});
        if (typeof chars === "string") {
          try {
            chars = JSON.parse(chars);
          } catch (e) {
            logger.error(funcName, "è§£æ chars JSON å­—ç¬¦ä¸²å¤±è´¥", e);
            chars = {};
          }
        }
        if (!chars || typeof chars !== "object") {
          otherRoles.value = [];
          return;
        }
        const entries = Object.entries(chars).filter(([k, v]) => !String(k).startsWith("$") && v && typeof v === "object" && !Array.isArray(v));
        const others = entries.filter(([, obj]) => {
          const cLoc = String(get(obj, ERA_VARIABLE_PATH.CHAR_LOCATION, "")).trim();
          return !(uLoc && cLoc && cLoc === uLoc);
        });
        others.sort((a, b) => {
          const la = String(get(a[1], ERA_VARIABLE_PATH.CHAR_LOCATION, "")).localeCompare(String(get(b[1], ERA_VARIABLE_PATH.CHAR_LOCATION, "")), "zh-Hans-CN");
          if (la !== 0) return la;
          return String(a[0]).localeCompare(String(b[0]), "zh-Hans-CN");
        });
        const loveThreshold = Number(get(statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_LOVE_THRESHOLD, 100));
        const hateThreshold = Number(get(statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_HATE_THRESHOLD, -100));
        const newRoles = others.map(([name, obj]) => {
          const fields = [ [ "å¹´é¾„", "å¹´é¾„" ], [ "æ€§åˆ«", "æ€§åˆ«" ], [ "èº«ä»½", "èº«ä»½" ], [ "æ€§æ ¼", "æ€§æ ¼" ], [ "å¤–è²Œ", "å¤–è²Œ" ], [ "è¡£ç€", "è¡£ç€" ], [ "äººé™…å…³ç³»", "äººé™…å…³ç³»" ], [ "æ€§ç»éªŒ", "æ€§ç»éªŒ" ], [ "æ€§çŸ¥è¯†", "æ€§çŸ¥è¯†" ], [ "ç‰¹æ®Šèƒ½åŠ›", "ç‰¹æ®Šèƒ½åŠ›" ], [ "èº«ä½“çŠ¶å†µ", "èº«ä½“çŠ¶å†µ" ], [ "ç›®æ ‡", "å½“å‰ç›®æ ‡" ], [ "æ‰€æƒ³", "å½“å‰æ‰€æƒ³" ], [ "å±…ä½åœ°åŒº", "å±…ä½åœ°åŒº" ] ];
          const affectionValue = get(obj, ERA_VARIABLE_PATH.CHAR_AFFECTION, 0);
          let affectionState = "neutral";
          if (affectionValue >= loveThreshold) affectionState = "love";
          if (affectionValue <= hateThreshold) affectionState = "hate";
          return {
            name,
            location: toText(get(obj, ERA_VARIABLE_PATH.CHAR_LOCATION, "æœªçŸ¥")),
            fields: fields.map(([label, key]) => ({
              label,
              value: toText(get(obj, key, "â€”"))
            })),
            raw: {
              name,
              ...obj
            },
            affectionState
          };
        });
        (0, external_Vue_namespaceObject.watch)(newRoles, (currentRoles, oldRoles) => {
          currentRoles.forEach((role, index) => {
            const oldRole = oldRoles?.find(r => r.name === role.name);
            if (oldRole && role.affectionState !== oldRole.affectionState) {
              const emitter = particleEmitters.value[index];
              if (emitter) {
                if (role.affectionState === "love") emitter.burst("heart", 10); else if (role.affectionState === "hate") emitter.burst("skull", 8);
              }
            }
          });
        }, {
          deep: true
        });
        otherRoles.value = newRoles;
        particleEmitters.value = new Array(newRoles.length);
      } catch (e) {
        logger.error(funcName, `æ›´æ–°â€œå…¶ä»–è§’è‰²â€åˆ—è¡¨æ—¶å‡ºé”™`, e);
        otherRoles.value = [];
      }
    };
    const onSkipVisitChange = () => {
      updateEraVariable(ERA_VARIABLE_PATH.SKIP_VISIT_HUNTERS, skipVisitHunters.value);
    };
    const onSkipSleepChange = () => {
      updateEraVariable(ERA_VARIABLE_PATH.SKIP_SLEEP_HUNTERS, skipSleepHunters.value);
    };
    const handleToggle = e => {
      const btn = e.target.closest(".GensokyoOrigin-ContentOthers-card-toggle");
      if (!btn) return;
      const card = btn.closest(".GensokyoOrigin-ContentOthers-role-card");
      if (!card) return;
      const expand = !card.classList.contains("expanded");
      card.classList.toggle("expanded", expand);
      card.classList.toggle("collapsed", !expand);
      btn.setAttribute("aria-expanded", String(expand));
      btn.textContent = expand ? "â–²" : "â–¼";
    };
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ _cache[6] || (_cache[6] = (0, 
    external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ§‘â€ğŸ¤â€ğŸ§‘"), (0, external_Vue_namespaceObject.createTextVNode)("å…¶ä»–è§’è‰²") ], -1)), (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ===== å…¶ä»–è§’è‰²å·¥å…·æ¡ ===== "), (0, external_Vue_namespaceObject.createElementVNode)("div", ContentOthersvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("span", ContentOthersvue_type_script_setup_true_lang_ts_hoisted_2, [ (0, 
    external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createElementVNode)("input", {
      id: "life-skip-visit-hunters",
      "onUpdate:modelValue": _cache[0] || (_cache[0] = $event => skipVisitHunters.value = $event),
      type: "checkbox",
      onChange: onSkipVisitChange
    }, null, 544), [ [ external_Vue_namespaceObject.vModelCheckbox, skipVisitHunters.value ] ]), _cache[2] || (_cache[2] = (0, 
    external_Vue_namespaceObject.createTextVNode)(" å¼‚å˜ä¸­é€€æ²»è€…ä¸æ‹œè®¿ ", -1)) ]), (0, external_Vue_namespaceObject.createElementVNode)("span", ContentOthersvue_type_script_setup_true_lang_ts_hoisted_3, [ (0, 
    external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createElementVNode)("input", {
      id: "life-skip-sleep-hunters",
      "onUpdate:modelValue": _cache[1] || (_cache[1] = $event => skipSleepHunters.value = $event),
      type: "checkbox",
      onChange: onSkipSleepChange
    }, null, 544), [ [ external_Vue_namespaceObject.vModelCheckbox, skipSleepHunters.value ] ]), _cache[3] || (_cache[3] = (0, 
    external_Vue_namespaceObject.createTextVNode)(" å¼‚å˜ä¸­é€€æ²»è€…ä¸ç¡è§‰ ", -1)) ]) ]), (0, external_Vue_namespaceObject.createElementVNode)("div", {
      id: "other-roles-list",
      class: "GensokyoOrigin-ContentOthers-incident-list",
      onClick: handleToggle
    }, [ otherRoles.value.length ? ((0, external_Vue_namespaceObject.openBlock)(true), 
    (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, {
      key: 0
    }, (0, external_Vue_namespaceObject.renderList)(otherRoles.value, (role, index) => ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", {
      key: role.name,
      class: "GensokyoOrigin-ContentOthers-role-card collapsed",
      "data-name": role.name
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", _hoisted_5, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_6, (0, external_Vue_namespaceObject.toDisplayString)(role.name.slice(0, 1)), 1), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", null, [ (0, external_Vue_namespaceObject.createElementVNode)("div", _hoisted_7, (0, 
    external_Vue_namespaceObject.toDisplayString)(role.name), 1), (0, external_Vue_namespaceObject.createElementVNode)("div", _hoisted_8, (0, 
    external_Vue_namespaceObject.toDisplayString)(role.location), 1) ]), _cache[4] || (_cache[4] = (0, 
    external_Vue_namespaceObject.createElementVNode)("button", {
      class: "GensokyoOrigin-ContentOthers-card-toggle",
      "aria-expanded": "false",
      "aria-label": "å±•å¼€/æ”¶èµ·"
    }, " â–¼ ", -1)) ]), (0, external_Vue_namespaceObject.createElementVNode)("div", _hoisted_9, [ ((0, 
    external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(role.fields, field => ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createElementBlock)("div", {
      key: field.label,
      class: "GensokyoOrigin-ContentOthers-role-line"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("strong", null, (0, external_Vue_namespaceObject.toDisplayString)(field.label) + "ï¼š", 1), (0, 
    external_Vue_namespaceObject.createTextVNode)((0, external_Vue_namespaceObject.toDisplayString)(field.value), 1) ]))), 128)), (0, 
    external_Vue_namespaceObject.createVNode)(AffectionDisplay, {
      character: role.raw,
      "stat-without-meta": stat.value,
      runtime: runtime.value,
      size: "large"
    }, null, 8, [ "character", "stat-without-meta", "runtime" ]), (0, external_Vue_namespaceObject.createVNode)(ParticleEmitter, {
      ref_for: true,
      ref: el => particleEmitters.value[index] = el,
      active: role.affectionState === "love" || role.affectionState === "hate",
      "particle-type": role.affectionState === "hate" ? "skull" : "heart",
      "emission-rate": 2
    }, null, 8, [ "active", "particle-type" ]) ]) ], 8, ContentOthersvue_type_script_setup_true_lang_ts_hoisted_4))), 128)) : ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", _hoisted_10, [ ..._cache[5] || (_cache[5] = [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      class: "GensokyoOrigin-ContentOthers-role-card-header"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", {
      class: "GensokyoOrigin-ContentOthers-role-avatar"
    }, "âœ”"), (0, external_Vue_namespaceObject.createElementVNode)("div", null, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      class: "GensokyoOrigin-ContentOthers-role-name"
    }, "å½“å‰æ— â€œå…¶ä»–è§’è‰²â€"), (0, external_Vue_namespaceObject.createElementVNode)("div", {
      class: "GensokyoOrigin-ContentOthers-role-meta"
    }, "ä¸ç©å®¶ä¸åŒåŒºçš„è§’è‰²ä¸º 0") ]) ], -1) ]) ])) ]) ]));
  }
});

const ContentOthers_exports_ = ContentOthersvue_type_script_setup_true_lang_ts;

const ContentOthers = ContentOthers_exports_;

const external_namespaceObject = _;

var external_default = __webpack_require__.n(external_namespaceObject);

const ContentSettingsvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "row",
  style: {
    display: "flex",
    gap: "8px",
    "align-items": "center",
    margin: "8px 0 12px"
  }
};

const ContentSettingsvue_type_script_setup_true_lang_ts_hoisted_2 = {
  id: "cfg_status",
  class: "tag"
};

const ContentSettingsvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "ContentSettings",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/ContentSettings");
    const loadStatus = (0, external_Vue_namespaceObject.ref)("æœªè½½å…¥");
    const configRoot = (0, external_Vue_namespaceObject.ref)(null);
    let initialConfig = null;
    let leafCount = 0;
    let groupCount = 0;
    const isObj = o => o && typeof o === "object" && !Array.isArray(o);
    const join = (base, k) => base ? `${base}.${k}` : k;
    function createControl(path, value) {
      const wrap = document.createElement("div");
      const key = document.createElement("div");
      const box = document.createElement("div");
      wrap.style.margin = "10px 0";
      key.style.fontWeight = "600";
      key.style.color = "#5e5042";
      key.textContent = path;
      wrap.appendChild(key);
      wrap.appendChild(box);
      let getVal;
      if (typeof value === "boolean") {
        const el = document.createElement("input");
        el.type = "checkbox";
        el.checked = !!value;
        box.appendChild(el);
        getVal = () => !!el.checked;
      } else if (typeof value === "number") {
        const el = document.createElement("input");
        el.type = "number";
        el.value = String(value);
        el.style.width = "100%";
        box.appendChild(el);
        getVal = () => Number(el.value);
      } else if (Array.isArray(value)) {
        const isPrimitiveArray = value.every(v => v === null || [ "string", "number", "boolean" ].includes(typeof v));
        const el = document.createElement("textarea");
        el.style.width = "100%";
        el.style.minHeight = "100px";
        box.appendChild(el);
        if (isPrimitiveArray) {
          el.value = value.map(v => String(v)).join("\n");
          getVal = () => {
            const lines = (el.value || "").split("\n").map(s => s.trim()).filter(Boolean);
            const allNumbers = lines.every(s => /^-?\d+(?:\.\d+)?$/.test(s));
            return allNumbers ? lines.map(Number) : lines;
          };
        } else {
          el.value = JSON.stringify(value, null, 2);
          getVal = () => {
            try {
              const text = el.value.trim();
              return text ? JSON.parse(text) : [];
            } catch (e) {
              logger.error("createControl", `è§£æJSONå¤±è´¥ï¼Œè·¯å¾„: ${path}`, e);
              return value;
            }
          };
        }
      } else {
        const el = document.createElement("input");
        el.type = "text";
        el.value = String(value);
        el.style.width = "100%";
        box.appendChild(el);
        getVal = () => el.value;
      }
      leafCount++;
      wrap.__getVal = getVal;
      wrap.dataset.path = path;
      try {
        wrap.dataset.init = JSON.stringify(value);
      } catch {
        wrap.dataset.init = "";
      }
      return wrap;
    }
    function createGroup(obj, basePath, docText) {
      const box = document.createElement("details");
      box.open = false;
      const sum = document.createElement("summary");
      sum.textContent = basePath || "(root)";
      box.appendChild(sum);
      if (docText) {
        const d = document.createElement("div");
        d.style.color = "#857664";
        d.style.fontSize = ".9em";
        d.style.margin = "6px 0 10px";
        d.textContent = docText;
        box.appendChild(d);
      }
      groupCount++;
      Object.keys(obj).forEach(k => {
        if (k === "__doc" || k === "_doc" || k.endsWith("__doc") || k.startsWith("_")) return;
        const v = obj[k];
        const p = join(basePath, k);
        if (isObj(v)) {
          const child = createGroup(v, p, v._doc || obj[`${k}__doc`]);
          box.appendChild(child);
        } else {
          const leafDoc = obj[`${k}__doc`];
          const controlElement = createControl(p, v);
          if (leafDoc) {
            const d = document.createElement("div");
            d.style.color = "#857664";
            d.style.fontSize = ".9em";
            d.style.margin = "6px 0 10px";
            d.textContent = leafDoc;
            controlElement.insertBefore(d, controlElement.children[1]);
          }
          box.appendChild(controlElement);
        }
      });
      return box;
    }
    function render(cfg) {
      if (!configRoot.value) {
        logger.warn("render", "æ— æ³•æ¸²æŸ“ï¼Œå› ä¸º #cfg_root å®¹å™¨ä¸å­˜åœ¨ã€‚");
        return;
      }
      const t0 = performance.now();
      leafCount = 0;
      groupCount = 0;
      configRoot.value.innerHTML = "";
      initialConfig = (0, external_namespaceObject.cloneDeep)(cfg);
      const view = createGroup(cfg, "", cfg?._doc);
      view.open = false;
      configRoot.value.appendChild(view);
      loadStatus.value = "å·²è½½å…¥";
      const ms = (performance.now() - t0).toFixed(1);
      logger.log("render", `é…ç½®æ¸²æŸ“å®Œæˆ`, {
        groups: groupCount,
        leaves: leafCount,
        ms
      });
    }
    function collectChanges() {
      const t0 = performance.now();
      const items = configRoot.value?.querySelectorAll("[data-path]") || [];
      const changes = [];
      let scanned = 0;
      items.forEach(el => {
        scanned++;
        const path = el.dataset.path;
        const getVal = el.__getVal;
        if (!path || !getVal) return;
        const currentValue = getVal();
        let initialValue = null;
        try {
          initialValue = JSON.parse(el.dataset.init || "null");
        } catch {}
        if (!(0, external_namespaceObject.isEqual)(currentValue, initialValue)) {
          changes.push({
            path,
            from: initialValue,
            to: currentValue
          });
        }
      });
      logger.log("collectChanges", `å·®å¼‚æ”¶é›†å®Œæˆ`, {
        scanned,
        changed: changes.length,
        ms: (performance.now() - t0).toFixed(1),
        sample: changes.slice(0, 5)
      });
      return changes;
    }
    async function save() {
      const funcName = "save";
      try {
        const changes = collectChanges();
        if (!changes.length) {
          logger.log(funcName, "æ— å˜åŒ–ï¼Œæ— éœ€ä¿å­˜ã€‚");
          toastr.info("æ²¡æœ‰æ£€æµ‹åˆ°ä»»ä½•æ›´æ”¹ã€‚");
          return;
        }
        logger.log(funcName, `å‡†å¤‡å†™å…¥ ${changes.length} é¡¹æ›´æ”¹...`);
        toastr.info(`æ­£åœ¨ä¿å­˜ ${changes.length} é¡¹æ›´æ”¹...`);
        let ok = 0, fail = 0;
        for (const change of changes) {
          try {
            updateEraVariable(`config.${change.path}`, change.to);
            ok++;
            logger.log(funcName, `å·²é€šè¿‡ era:updateByPath è¯·æ±‚æ›´æ–°`, {
              path: `config.${change.path}`
            });
          } catch (e) {
            fail++;
            logger.error(funcName, `å†™å…¥å¤±è´¥`, {
              path: change.path,
              error: e
            });
          }
        }
        logger.log(funcName, `ä¿å­˜å®Œæˆ`, {
          ok,
          fail
        });
        toastr.success(`ä¿å­˜æˆåŠŸ ${ok} é¡¹ï¼Œå¤±è´¥ ${fail} é¡¹ã€‚`);
      } catch (e) {
        logger.error(funcName, `ä¿å­˜è¿‡ç¨‹å‡ºç°å¼‚å¸¸`, e);
        toastr.error("ä¿å­˜è¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯ã€‚");
      }
    }
    function expandAll() {
      const list = configRoot.value?.querySelectorAll("details");
      list?.forEach(d => d.open = true);
      logger.log("expandAll", `å±•å¼€äº† ${list?.length || 0} ä¸ªåˆ†ç»„ã€‚`);
    }
    function collapseAll() {
      const list = configRoot.value?.querySelectorAll("details");
      list?.forEach(d => d.open = false);
      logger.log("collapseAll", `æŠ˜å äº† ${list?.length || 0} ä¸ªåˆ†ç»„ã€‚`);
    }
    function update(statWithoutMeta) {
      const funcName = "update";
      logger.log(funcName, "æ¥æ”¶åˆ°æ›´æ–°è¯·æ±‚", {
        keys: Object.keys(statWithoutMeta || {}).length
      });
      const config = (0, external_namespaceObject.get)(statWithoutMeta, "config");
      if (config && typeof config === "object") {
        render(config);
      } else {
        logger.warn(funcName, "åœ¨ statWithoutMeta ä¸­æœªæ‰¾åˆ°æœ‰æ•ˆçš„ config å¯¹è±¡ã€‚");
        loadStatus.value = "é…ç½®æ— æ•ˆ";
      }
    }
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "âš™ï¸"), (0, external_Vue_namespaceObject.createTextVNode)("è®¾ç½®") ], -1)), (0, external_Vue_namespaceObject.createElementVNode)("div", ContentSettingsvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("span", ContentSettingsvue_type_script_setup_true_lang_ts_hoisted_2, (0, 
    external_Vue_namespaceObject.toDisplayString)(loadStatus.value), 1), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "btn_expand_all",
      onClick: expandAll
    }, "å±•å¼€å…¨éƒ¨"), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "btn_collapse_all",
      onClick: collapseAll
    }, "æŠ˜å å…¨éƒ¨"), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "btn_save_cfg",
      onClick: save
    }, "ä¿å­˜æ›´æ”¹åˆ°ä¸–ç•Œä¹¦") ]), _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("div", {
      class: "hint"
    }, "å¸ƒå°”=å‹¾é€‰ï¼Œæ•°å­—=æ•°å­—æ¡†ï¼Œå­—ç¬¦ä¸²=æ–‡æœ¬æ¡†ï¼Œæ•°ç»„=æ¯è¡Œä¸€é¡¹ã€‚å¯¹è±¡ä¼šæŠ˜å ä¸ºåˆ†ç»„ã€‚", -1)), (0, external_Vue_namespaceObject.createElementVNode)("div", {
      id: "cfg_root",
      ref_key: "configRoot",
      ref: configRoot
    }, null, 512) ]));
  }
});

const ContentSettings_exports_ = (0, exportHelper.A)(ContentSettingsvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-851a0cc6" ] ]);

const ContentSettings = ContentSettings_exports_;

const T0_PATH = "incident.å¼‚å˜å†·å´åŸºå‡†æ—¶é—´";

const Incidentsvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "Incidents",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/Incidents");
    function extractIncidents(data) {
      let root = get(data, "incidents");
      if (typeof root === "string") {
        try {
          root = JSON.parse(root);
        } catch {
          root = null;
        }
      }
      if (!root || typeof root !== "object" || Array.isArray(root)) return [];
      return Object.entries(root).filter(([k, v]) => !String(k).startsWith("$") && v && typeof v === "object" && !Array.isArray(v)).map(([__name, __data]) => ({
        __name,
        __data
      }));
    }
    function renderIncidents(state) {
      const funcName = "renderIncidents";
      const host = document.getElementById("incident-list");
      if (!host) {
        logger.warn(funcName, "æœªæ‰¾åˆ° #incident-list å®¹å™¨ã€‚");
        return;
      }
      host.innerHTML = "";
      const items = extractIncidents(state);
      logger.log(funcName, `å¼€å§‹æ¸²æŸ“ ${items.length} ä¸ªå¼‚å˜å¡ç‰‡ã€‚`);
      items.forEach(({__name, __data}) => {
        const name = toText(get(__data, "å¼‚å˜åç§°", __name));
        const status = toText(get(__data, "å¼‚å˜è¿›ç¨‹", "æœªçŸ¥"));
        const fields = [ [ "å½±å“", "å¼‚å˜å½±å“" ], [ "é€€æ²»è€…", "å¼‚å˜é€€æ²»è€…" ], [ "å‘èµ·è€…", "å¼‚å˜å‘èµ·è€…" ], [ "é»‘å¹•", "å¼‚å˜é»‘å¹•" ], [ "å…¶ä»–ä¿¡æ¯", "å…¶ä»–å¼‚å˜ä¿¡æ¯" ] ];
        const card = document.createElement("div");
        card.className = "role-card";
        card.innerHTML = `\n<div class="role-card-header">\n    <div class="role-avatar">å¼‚</div>\n    <div><div class="role-name">${name}</div><div class="role-meta">è¿›ç¨‹ï¼š${status}</div></div>\n</div>\n${fields.map(([label, key]) => {
          const val = key === "å¼‚å˜é€€æ²»è€…" ? getRaw(__data, key, []) : get(__data, key, "â€”");
          return `<div class="role-line"><strong>${label}ï¼š</strong>${toText(val)}</div>`;
        }).join("")}\n`;
        host.appendChild(card);
      });
      logger.log(funcName, "å¼‚å˜å¡ç‰‡æ¸²æŸ“å®Œæˆã€‚");
    }
    function readT0(runtime) {
      if (!runtime) {
        logger.warn("readT0", "runtime å¯¹è±¡ä¸å­˜åœ¨ï¼Œæ— æ³•è¯»å– T0ã€‚");
        return null;
      }
      const t0 = get(runtime, T0_PATH, null);
      if (t0 != null) {
        const n = Number(toText(t0));
        if (Number.isFinite(n)) {
          logger.log("readT0", `ä» runtime è¯»å–åˆ° t0: ${n}`);
          return n;
        }
      }
      logger.log("readT0", "æœªåœ¨ runtime ä¸­è¯»å–åˆ°åˆæ³• t0ã€‚");
      return null;
    }
    function readCooldownMinutes(state) {
      const cooldown = get(state, ERA_VARIABLE_PATH.INCIDENT_COOLDOWN, 0);
      const n = Number(toText(cooldown));
      if (Number.isFinite(n) && n >= 0) {
        return Math.floor(n);
      }
      return 0;
    }
    function readTimeProgress(state) {
      const timeProgress = get(state, ERA_VARIABLE_PATH.TIME_PROGRESS, 0);
      const n = Number(toText(timeProgress));
      return Number.isFinite(n) ? Math.floor(n) : 0;
    }
    function calcCountdownMinutes(context) {
      const {statWithoutMeta, runtime} = context;
      const t0 = readT0(runtime);
      if (t0 === null) {
        logger.log("calcCountdownMinutes", "t0 ä¸å­˜åœ¨/éæ³•ï¼Œæœ¬è½®å€’è®¡æ—¶æŒ‰ 0 å¤„ç†ã€‚");
        return 0;
      }
      const tp = readTimeProgress(statWithoutMeta);
      const cd = readCooldownMinutes(statWithoutMeta);
      const left = Math.max(0, Math.floor(cd - (tp - t0)));
      logger.log("calcCountdownMinutes", `è®¡ç®—å€’è®¡æ—¶ï¼ˆåˆ†é’Ÿï¼‰: { t0: ${t0}, timeProgress: ${tp}, cooldown: ${cd}, å‰©ä½™: ${left} }`);
      return left;
    }
    function updateIncidentToolbar(context) {
      const funcName = "updateIncidentToolbar";
      const {statWithoutMeta} = context;
      const cdEl = document.getElementById("incident-countdown");
      const triggerNowEl = document.getElementById("incident-trigger-now");
      const randomPoolEl = document.getElementById("incident-pool-random");
      if (cdEl) {
        const left = calcCountdownMinutes(context);
        cdEl.textContent = left == null ? "â€”" : String(left);
        logger.log(funcName, `å¼‚å˜å€’è®¡æ—¶å·²æ›´æ–°ä¸º: ${cdEl.textContent}`);
      }
      if (triggerNowEl) {
        const shouldTrigger = get(statWithoutMeta, ERA_VARIABLE_PATH.INCIDENT_IMMEDIATE_TRIGGER, false);
        triggerNowEl.checked = !!shouldTrigger;
        logger.log(funcName, `â€œç«‹å³å¼•å‘å¼‚å˜â€çŠ¶æ€å·²æ›´æ–°ä¸º: ${triggerNowEl.checked}`);
      }
      if (randomPoolEl) {
        const useRandom = get(statWithoutMeta, ERA_VARIABLE_PATH.INCIDENT_RANDOM_POOL, false);
        randomPoolEl.checked = !!useRandom;
        logger.log(funcName, `â€œä¹±åºå¼‚å˜â€çŠ¶æ€å·²æ›´æ–°ä¸º: ${randomPoolEl.checked}`);
      }
    }
    const update = context => {
      const {statWithoutMeta} = context || {};
      if (!statWithoutMeta) {
        logger.warn("update", "ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸å®Œæ•´ï¼Œç¼ºå°‘ statWithoutMetaï¼Œå·²ä¸­æ­¢ã€‚");
        return;
      }
      renderIncidents(statWithoutMeta);
      updateIncidentToolbar(context);
    };
    (0, external_Vue_namespaceObject.onMounted)(() => {
      const funcName = "onMounted";
      const triggerNowEl = document.getElementById("incident-trigger-now");
      const randomPoolEl = document.getElementById("incident-pool-random");
      if (triggerNowEl) {
        triggerNowEl.onchange = () => {
          const newValue = triggerNowEl.checked;
          logger.log(funcName, `ç”¨æˆ·åˆ‡æ¢â€œç«‹å³å¼•å‘å¼‚å˜â€ä¸º: ${newValue}`);
          updateEraVariable(ERA_VARIABLE_PATH.INCIDENT_IMMEDIATE_TRIGGER, newValue);
        };
      }
      if (randomPoolEl) {
        randomPoolEl.onchange = () => {
          const newValue = randomPoolEl.checked;
          logger.log(funcName, `ç”¨æˆ·åˆ‡æ¢â€œä¹±åºå¼‚å˜â€ä¸º: ${newValue}`);
          updateEraVariable(ERA_VARIABLE_PATH.INCIDENT_RANDOM_POOL, newValue);
        };
      }
      logger.log(funcName, "å¼‚å˜å·¥å…·æ äº‹ä»¶å·²ç»‘å®šã€‚");
    });
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "âš ï¸"), (0, external_Vue_namespaceObject.createTextVNode)("å¼‚å˜å•Šå¼‚å˜ï¼") ], -1)), (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ===== å¼‚å˜å·¥å…·æ ï¼ˆå€’è®¡æ—¶ + ç«‹å³å¼•å‘ï¼‰ ===== "), _cache[1] || (_cache[1] = (0, 
    external_Vue_namespaceObject.createStaticVNode)('<div id="incident-toolbar" class="debug-select" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;" data-v-14370179><span class="label" style="min-width:auto;margin:0;" data-v-14370179><span class="emoji" data-v-14370179>â³</span>å¼‚å˜å€’è®¡æ—¶ï¼ˆåˆ†é’Ÿï¼‰: </span><strong id="incident-countdown" data-v-14370179>â€”</strong><span class="debug-switch" title="æ¥è‡ªä¸–ç•Œä¹¦ config çš„åˆå§‹å€¼ï¼›ä¿®æ”¹å³å†™å›åˆ°èŠå¤©å˜é‡çš„ config.incidents.triggerImmediate" data-v-14370179><input id="incident-trigger-now" type="checkbox" data-v-14370179> ç«‹å³å¼•å‘å¼‚å˜ </span><span class="debug-switch" title="æ¥è‡ª config.incident.random_pool" data-v-14370179><input id="incident-pool-random" type="checkbox" data-v-14370179> ä¹±åºå¼‚å˜ </span></div><div id="incident-list" class="incident-list" data-v-14370179></div>', 2)) ]));
  }
});

const Incidents_exports_ = (0, exportHelper.A)(Incidentsvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-14370179" ] ]);

const Incidents = Incidents_exports_;

const WorldMapvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "WorldMap",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/WorldMap");
    const mapText = (0, external_Vue_namespaceObject.ref)("");
    const mapGraph = (0, external_Vue_namespaceObject.ref)(null);
    function escHtml(s) {
      const AMP = "&" + "amp;", LT = "&" + "lt;", GT = "&" + "gt;", QUOT = "&" + "quot;", SQT = "&" + "#39;";
      let out = String(s);
      out = out.replace(/&/g, AMP);
      out = out.replace(/</g, LT).replace(/>/g, GT);
      out = out.replace(/"/g, QUOT).replace(/'/g, SQT);
      return out;
    }
    function findAll(text, token, cap = 200) {
      const T = String(text || ""), K = String(token || "");
      if (!K) return [];
      const out = [];
      let i = 0;
      while (true) {
        const p = T.indexOf(K, i);
        if (p < 0) break;
        out.push(p);
        i = p + Math.max(1, K.length);
        if (out.length >= cap) {
          logger.warn("findAll", `æŸ¥æ‰¾â€œ${K}â€æ—¶è¾¾åˆ°ä¸Šé™ ${cap} æ¬¡ï¼Œå¯èƒ½å­˜åœ¨è¿‡å¤šåŒ¹é…é¡¹ã€‚`);
          break;
        }
      }
      return out;
    }
    function buildAdjacencyMap(graph) {
      const adj = new Map;
      if (!graph) return adj;
      const edges = getRaw(graph, "edges") || [];
      if (!Array.isArray(edges)) {
        logger.warn("buildAdjacencyMap", 'å›¾è°±ä¸­çš„ "edges" ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ— æ³•æ„å»ºé‚»æ¥è¡¨ã€‚', edges);
        return adj;
      }
      for (const e of edges) {
        const a = String(e?.a || "").trim();
        const b = String(e?.b || "").trim();
        if (!a || !b || a === b) continue;
        if (!adj.has(a)) adj.set(a, new Set);
        if (!adj.has(b)) adj.set(b, new Set);
        adj.get(a).add(b);
        adj.get(b).add(a);
      }
      return adj;
    }
    async function computeHighlightedHtml(state, {animate = true} = {}) {
      const funcName = "computeHighlightedHtml";
      if (!mapText.value) {
        logger.warn(funcName, "åœ°å›¾æ–‡æœ¬ä¸ºç©ºï¼Œæ— æ³•è®¡ç®—é«˜äº®ã€‚");
        return {
          ok: true,
          found: false,
          html: '<span class="map-loading">ï¼ˆæœªæ‰¾åˆ°åœ°å›¾æ–‡æœ¬ï¼‰</span>'
        };
      }
      const text = mapText.value;
      const fallbackPlace = get(state, ERA_VARIABLE_PATH.FALLBACK_PLACE, "åšä¸½ç¥ç¤¾");
      const keyword = get(state, ERA_VARIABLE_PATH.USER_LOCATION, fallbackPlace).trim();
      logger.log(funcName, `å½“å‰é«˜äº®å…³é”®å­—: ${keyword}`);
      let nearNames = [];
      try {
        const adj = buildAdjacencyMap(mapGraph.value);
        nearNames = Array.from(adj.get(keyword) || []);
        logger.log(funcName, `æ‰¾åˆ° ${nearNames.length} ä¸ªé‚»è¿‘åœ°åŒº`, nearNames);
      } catch (e) {
        logger.error(funcName, "é‚»æ¥è®¡ç®—å¤±è´¥", e);
      }
      const hits = [];
      const push = (token, cls) => {
        if (!token) return;
        for (const at of findAll(text, token)) hits.push({
          at,
          len: token.length,
          cls,
          pri: cls === "hit" ? 2 : 1
        });
      };
      push(keyword, "hit");
      nearNames.forEach(n => push(n, "near"));
      if (!hits.length) {
        logger.log(funcName, "æœªåœ¨åœ°å›¾ä¸Šæ‰¾åˆ°ä»»ä½•å¯é«˜äº®çš„åœ°åŒºã€‚");
        return {
          ok: true,
          found: false,
          html: escHtml(text)
        };
      }
      hits.sort((a, b) => a.at - b.at || b.pri - a.pri || b.len - a.len);
      let out = "", cur = 0;
      for (const h of hits) {
        if (h.at < cur) continue;
        out += escHtml(text.slice(cur, h.at));
        const mid = text.slice(h.at, h.at + h.len);
        const cls = (h.cls === "hit" ? "map-hit" : "map-near") + (animate ? "" : " paused");
        const title = (h.cls === "hit" ? "å½“å‰ä½ç½®ï¼š" : "é™„è¿‘åœ°åŒºï¼š") + mid;
        out += `<span class="${cls}" ${h.cls === "hit" ? 'data-hit="1"' : 'data-near="1"'} title="${escHtml(title)}">${escHtml(mid)}</span>`;
        cur = h.at + h.len;
      }
      out += escHtml(text.slice(cur));
      logger.log(funcName, `é«˜äº®HTMLæ„å»ºå®Œæˆï¼Œå…±å¤„ç† ${hits.length} ä¸ªé«˜äº®åŒºåŸŸã€‚`);
      return {
        ok: true,
        found: true,
        html: out
      };
    }
    const update = async statWithoutMeta => {
      const funcName = "update";
      logger.log(funcName, "æ¥æ”¶åˆ°æ›´æ–°è¯·æ±‚ï¼Œå¼€å§‹æ›´æ–°ä¸–ç•Œåœ°å›¾ç»„ä»¶ã€‚");
      mapText.value = get(statWithoutMeta, ERA_VARIABLE_PATH.MAP_ASCII, "");
      mapGraph.value = get(statWithoutMeta, ERA_VARIABLE_PATH.MAP_GRAPH, null);
      if (!mapText.value) {
        logger.warn(funcName, "åœ°å›¾æ–‡æœ¬(world.map_ascii)ä¸ºç©ºï¼Œæ— æ³•æ¸²æŸ“åœ°å›¾ã€‚");
      }
      if (!mapGraph.value) {
        logger.warn(funcName, "åœ°å›¾å›¾è°±(world.map_graph)ä¸ºç©ºï¼Œæ— æ³•è®¡ç®—é‚»è¿‘åœ°åŒºã€‚");
      }
      const host = document.getElementById("world-map");
      if (!host) {
        logger.error(funcName, "æœªæ‰¾åˆ° #world-map å®¹å™¨ï¼Œæ— æ³•æ¸²æŸ“åœ°å›¾ã€‚");
        return false;
      }
      const res = await computeHighlightedHtml(statWithoutMeta);
      host.innerHTML = res.html || '<span class="map-loading">ï¼ˆç©ºï¼‰</span>';
      logger.log(funcName, "åœ°å›¾é«˜äº®æ¸²æŸ“å®Œæˆã€‚");
      const nearbyPlacesEl = document.getElementById("nearby-places");
      if (nearbyPlacesEl) {
        const fallbackPlace = get(statWithoutMeta, ERA_VARIABLE_PATH.FALLBACK_PLACE, "åšä¸½ç¥ç¤¾");
        const base = get(statWithoutMeta, ERA_VARIABLE_PATH.USER_LOCATION, fallbackPlace);
        try {
          const adj = buildAdjacencyMap(mapGraph.value);
          const neighbors = Array.from(adj.get(base) || []);
          nearbyPlacesEl.textContent = neighbors.length > 0 ? neighbors.join("ï¼›") : "â€”";
          logger.log(funcName, `â€œé™„è¿‘åœ°åŒºâ€å·²æ›´æ–°ä¸º: ${nearbyPlacesEl.textContent}`);
        } catch (e) {
          nearbyPlacesEl.textContent = "â€”";
          logger.error(funcName, "æ›´æ–°â€œé™„è¿‘åœ°åŒºâ€æ—¶å‘ç”Ÿé”™è¯¯", e);
        }
      }
      logger.log(funcName, "ä¸–ç•Œåœ°å›¾ç»„ä»¶æ›´æ–°æµç¨‹ç»“æŸã€‚");
      return true;
    };
    (0, external_Vue_namespaceObject.onMounted)(() => {
      const funcName = "onMounted";
      const btnReload = document.getElementById("map-reload");
      if (btnReload) {
        btnReload.onclick = () => {
          logger.log(funcName, "ç”¨æˆ·ç‚¹å‡»â€œé‡æ–°åŠ è½½â€æŒ‰é’®ï¼Œæ´¾å‘ era:requestFullUpdate äº‹ä»¶ã€‚");
          window.dispatchEvent(new CustomEvent("era:requestFullUpdate", {
            detail: {
              reason: "map-reload"
            }
          }));
        };
      }
      const btnAnim = document.getElementById("map-toggle-anim");
      if (btnAnim) {
        btnAnim.onclick = () => {
          const host = document.getElementById("world-map");
          if (!host) return;
          const nodes = host.querySelectorAll(".map-hit, .map-near");
          if (!nodes.length) return;
          const willPlay = nodes[0].classList.contains("paused");
          nodes.forEach(n => n.classList.toggle("paused", !willPlay));
          logger.log(funcName, `åˆ‡æ¢åœ°å›¾åŠ¨ç”»ä¸º: ${willPlay ? "æ’­æ”¾" : "æš‚åœ"}`);
        };
      }
      const btnCopy = document.getElementById("map-copy");
      if (btnCopy) {
        btnCopy.onclick = async () => {
          if (mapText.value) {
            await navigator.clipboard.writeText(mapText.value);
            logger.log(funcName, "åœ°å›¾åŸå§‹æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚");
          } else {
            logger.warn(funcName, "å¤åˆ¶å¤±è´¥ï¼Œå› ä¸ºåœ°å›¾æ–‡æœ¬ä¸ºç©ºã€‚");
          }
        };
      }
      const dimChk = document.getElementById("map-dim-others");
      if (dimChk) {
        dimChk.onchange = () => {
          const host = document.getElementById("world-map");
          if (host) {
            host.classList.toggle("dim-others", dimChk.checked);
            logger.log(funcName, `åˆ‡æ¢â€œå¼±åŒ–éé«˜äº®â€ä¸º: ${dimChk.checked}`);
          }
        };
      }
      logger.log(funcName, "åœ°å›¾å·¥å…·æ æŒ‰é’®äº‹ä»¶å·²æˆåŠŸç»‘å®šã€‚");
    });
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ===== ä¸–ç•Œåœ°å›¾ï¼ˆASCIIï¼‰å®¹å™¨ ===== "), _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("hr", {
      class: "dashed"
    }, null, -1)), _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ—ºï¸"), (0, external_Vue_namespaceObject.createTextVNode)("ä¸–ç•Œåœ°å›¾ï¼ˆæ–‡å­—ï¼‰") ], -1)), (0, 
    external_Vue_namespaceObject.createCommentVNode)(" åœ°å›¾å·¥å…·æ ï¼ŒåŒ…å«åˆ·æ–°ã€åŠ¨ç”»åˆ‡æ¢ã€å¤åˆ¶å’Œå¼±åŒ–éé«˜äº®åŒºåŸŸçš„é€‰é¡¹ "), _cache[2] || (_cache[2] = (0, 
    external_Vue_namespaceObject.createStaticVNode)('<div id="world-map-toolbar" class="map-toolbar" aria-label="åœ°å›¾å·¥å…·æ¡" data-v-7467c71a><button id="map-reload" class="font-size-btn" title="è¯·æ±‚ERAæ ¸å¿ƒé‡æ–°è¯»å–æ‰€æœ‰æ•°æ®å¹¶é‡ç»˜UI" data-v-7467c71a>âŸ³</button><button id="map-toggle-anim" class="font-size-btn" title="åˆ‡æ¢é«˜äº®åŠ¨ç”»" data-v-7467c71a>ğŸï¸</button><button id="map-copy" class="font-size-btn" title="å¤åˆ¶åŸå§‹åœ°å›¾æ–‡æœ¬" data-v-7467c71a>ğŸ“‹</button><span class="debug-switch" data-v-7467c71a><input id="map-dim-others" type="checkbox" data-v-7467c71a> å¼±åŒ–éé«˜äº®</span></div>', 1)), (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ç”¨äºæ˜¾ç¤ºASCIIåœ°å›¾çš„ <pre> å…ƒç´  "), _cache[3] || (_cache[3] = (0, 
    external_Vue_namespaceObject.createElementVNode)("pre", {
      id: "world-map",
      class: "ascii-map",
      "aria-live": "polite"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "map-loading"
    }, "ï¼ˆç­‰å¾…æ•°æ®æ›´æ–°â€¦â€¦ï¼‰") ], -1)), (0, external_Vue_namespaceObject.createCommentVNode)(" åœ°å›¾å›¾ä¾‹ï¼Œè§£é‡Šé«˜äº®é¢œè‰² "), _cache[4] || (_cache[4] = (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      id: "world-map-legend",
      class: "map-legend"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "swatch swatch-hit"
    }), (0, external_Vue_namespaceObject.createTextVNode)("å½“å‰ä½ç½® "), (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "swatch swatch-near"
    }), (0, external_Vue_namespaceObject.createTextVNode)("é™„è¿‘åœ°åŒº ") ], -1)), (0, external_Vue_namespaceObject.createCommentVNode)(" æ˜¾ç¤ºé™„è¿‘åœ°åŒºçš„æ®µè½ "), _cache[5] || (_cache[5] = (0, 
    external_Vue_namespaceObject.createElementVNode)("p", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "label"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ›ï¸"), (0, external_Vue_namespaceObject.createTextVNode)("é™„è¿‘åœ°åŒº:") ]), (0, external_Vue_namespaceObject.createTextVNode)(), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", {
      id: "nearby-places"
    }, "â€”") ], -1)) ]));
  }
});

const WorldMap_exports_ = (0, exportHelper.A)(WorldMapvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-7467c71a" ] ]);

const WorldMap = WorldMap_exports_;

const FontSizeControlsvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "font-size-controls"
};

const FontSizeControlsvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "FontSizeControls",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/tabs/FontSizeControls");
    const currentPercent = (0, external_Vue_namespaceObject.ref)(100);
    const stepPct = (0, external_Vue_namespaceObject.ref)(10);
    const clamp = n => Math.max(60, Math.min(200, Math.floor(Number(n) || 100)));
    const applyToDOM = pct => {
      const content = document.getElementById("content_main");
      if (content) {
        content.style.fontSize = `${pct}%`;
        logger.log("applyToDOM", `å·²åº”ç”¨å­—å·: ${pct}%`);
      } else {
        logger.warn("applyToDOM", "æœªæ‰¾åˆ° #content_main å…ƒç´ ã€‚");
      }
    };
    const updateFontSize = statWithoutMeta => {
      const funcName = "updateFontSize";
      if (!statWithoutMeta || typeof statWithoutMeta !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ statWithoutMeta æ— æ•ˆã€‚", statWithoutMeta);
        return;
      }
      const newPercent = get(statWithoutMeta, ERA_VARIABLE_PATH.MAIN_FONT_PERCENT, 100);
      const clampedPercent = clamp(Number(newPercent));
      stepPct.value = get(statWithoutMeta, ERA_VARIABLE_PATH.FONT_SCALE_STEP_PCT, 10);
      currentPercent.value = clampedPercent;
      applyToDOM(clampedPercent);
      logger.log(funcName, `ä» statWithoutMeta æ›´æ–°å­—å·ä¸º: ${clampedPercent}%`);
    };
    (0, external_Vue_namespaceObject.onMounted)(() => {
      const inc = document.getElementById("increase-font");
      const dec = document.getElementById("decrease-font");
      if (inc) {
        inc.onclick = () => {
          const newValue = clamp(currentPercent.value + stepPct.value);
          currentPercent.value = newValue;
          applyToDOM(newValue);
          updateEraVariable(ERA_VARIABLE_PATH.MAIN_FONT_PERCENT, newValue);
        };
      }
      if (dec) {
        dec.onclick = () => {
          const newValue = clamp(currentPercent.value - stepPct.value);
          currentPercent.value = newValue;
          applyToDOM(newValue);
          updateEraVariable(ERA_VARIABLE_PATH.MAIN_FONT_PERCENT, newValue);
        };
      }
      logger.log("onMounted", "æŒ‰é’®äº‹ä»¶å·²ç»‘å®šã€‚");
    });
    __expose({
      updateFontSize
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", FontSizeControlsvue_type_script_setup_true_lang_ts_hoisted_1, [ ..._cache[0] || (_cache[0] = [ (0, 
    external_Vue_namespaceObject.createElementVNode)("button", {
      id: "decrease-font",
      class: "font-size-btn"
    }, "âˆ’", -1), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "increase-font",
      class: "font-size-btn"
    }, "+", -1) ]) ]));
  }
});

const FontSizeControls_exports_ = (0, exportHelper.A)(FontSizeControlsvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-7fbcf727" ] ]);

const FontSizeControls = FontSizeControls_exports_;

const StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "status-tabs",
  class: "status-tabs"
};

const StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_2 = [ "data-tab", "onClick" ];

const StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_3 = {
  id: "status-tab-content-area",
  class: "status-tab-content-area"
};

const StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_4 = {
  id: "main-content",
  class: "preserve-format"
};

const StatusTabContentvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "StatusTabContent",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusTab/StatusTabContent");
    const fontSizeControls = (0, external_Vue_namespaceObject.ref)(null);
    const worldMap = (0, external_Vue_namespaceObject.ref)(null);
    const incidents = (0, external_Vue_namespaceObject.ref)(null);
    const contentOthers = (0, external_Vue_namespaceObject.ref)(null);
    const contentBio = (0, external_Vue_namespaceObject.ref)(null);
    const contentSettings = (0, external_Vue_namespaceObject.ref)(null);
    const tabs = [ {
      id: "main",
      name: "æ­£æ–‡"
    }, {
      id: "status",
      name: "ä¸–ç•Œ"
    }, {
      id: "incidents",
      name: "å¼‚å˜å•Šå¼‚å˜ï¼"
    }, {
      id: "others",
      name: "å…¶ä»–è§’è‰²"
    }, {
      id: "bio",
      name: "å±¥å†ä¸å…³ç³»"
    }, {
      id: "settings",
      name: "è®¾ç½®"
    } ];
    const activeTab = (0, external_Vue_namespaceObject.ref)("main");
    const switchTab = tabId => {
      logger.log("switchTab", `åˆ‡æ¢é€‰é¡¹å¡åˆ°: ${tabId}`);
      activeTab.value = tabId;
    };
    const update = context => {
      const funcName = "update";
      const {statWithoutMeta, runtime} = context || {};
      logger.log(funcName, `æ¥æ”¶åˆ°æ›´æ–°è¯·æ±‚ï¼Œå¼€å§‹æ›´æ–°æ‰€æœ‰å­ç»„ä»¶...`, {
        context
      });
      if (!statWithoutMeta) {
        logger.warn(funcName, "ä¼ å…¥çš„ context æˆ– statWithoutMeta ä¸ºç©ºï¼Œæ— æ³•æ›´æ–° UIã€‚");
        return;
      }
      if (fontSizeControls.value && typeof fontSizeControls.value.updateFontSize === "function") {
        fontSizeControls.value.updateFontSize(statWithoutMeta);
        logger.debug(funcName, "å·²è°ƒç”¨ FontSizeControls.updateFontSize");
      }
      if (worldMap.value && typeof worldMap.value.update === "function") {
        worldMap.value.update(statWithoutMeta);
        logger.debug(funcName, "å·²è°ƒç”¨ WorldMap.update");
      }
      if (incidents.value && typeof incidents.value.update === "function") {
        incidents.value.update(context);
        logger.debug(funcName, "å·²è°ƒç”¨ Incidents.update");
      }
      if (contentOthers.value && typeof contentOthers.value.update === "function") {
        contentOthers.value.update(context);
        logger.debug(funcName, "å·²è°ƒç”¨ ContentOthers.update");
      }
      if (contentBio.value && typeof contentBio.value.update === "function") {
        contentBio.value.update(statWithoutMeta);
        logger.debug(funcName, "å·²è°ƒç”¨ ContentBio.update");
      }
      if (contentSettings.value && typeof contentSettings.value.update === "function") {
        contentSettings.value.update(statWithoutMeta);
        logger.debug(funcName, "å·²è°ƒç”¨ ContentSettings.update");
      }
      const mainExtraEl = document.getElementById("main-extra");
      if (mainExtraEl) {
        const contentString = getStr(statWithoutMeta, ERA_VARIABLE_PATH.EXTRA_MAIN, "");
        mainExtraEl.textContent = contentString;
        logger.debug(funcName, "å·²æ›´æ–°é™„åŠ æ­£æ–‡", {
          content: contentString.slice(0, 50) + "..."
        });
      }
      logger.log(funcName, "æ‰€æœ‰å­ç»„ä»¶æ›´æ–°å®Œæˆã€‚");
    };
    __expose({
      update,
      worldMap,
      incidents,
      contentOthers,
      contentBio,
      contentSettings
    });
    return (_ctx, _cache) => {
      const _component_content = (0, external_Vue_namespaceObject.resolveComponent)("content");
      return (0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", null, [ (0, 
      external_Vue_namespaceObject.createCommentVNode)(" â–¼ [ç§»æ¤] è¿™éƒ¨åˆ† HTML ç»“æ„ä¸¥æ ¼å¤åˆ¶è‡ª app.vue "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_1, [ ((0, 
      external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
      external_Vue_namespaceObject.renderList)(tabs, tab => (0, external_Vue_namespaceObject.createElementVNode)("button", {
        key: tab.id,
        "data-tab": tab.id,
        class: (0, external_Vue_namespaceObject.normalizeClass)({
          active: activeTab.value === tab.id
        }),
        onClick: $event => switchTab(tab.id)
      }, (0, external_Vue_namespaceObject.toDisplayString)(tab.name), 11, StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_2)), 64)) ]), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_3, [ (0, 
      external_Vue_namespaceObject.createCommentVNode)(" æ­£æ–‡ Tab "), (0, external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_main",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "main"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(FontSizeControls, {
        ref_key: "fontSizeControls",
        ref: fontSizeControls
      }, null, 512), (0, external_Vue_namespaceObject.createElementVNode)("div", StatusTabContentvue_type_script_setup_true_lang_ts_hoisted_4, [ (0, 
      external_Vue_namespaceObject.createVNode)(_component_content, null, {
        default: (0, external_Vue_namespaceObject.withCtx)(() => [ ..._cache[0] || (_cache[0] = [ (0, 
        external_Vue_namespaceObject.createTextVNode)("$1", -1) ]) ]),
        _: 1
      }) ]), _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("div", {
        id: "main-extra",
        class: "preserve-format"
      }, null, -1)) ], 2), (0, external_Vue_namespaceObject.createCommentVNode)(" ä¸–ç•Œ Tab (WorldMap) "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_status",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "status"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(WorldMap, {
        ref_key: "worldMap",
        ref: worldMap
      }, null, 512) ], 2), (0, external_Vue_namespaceObject.createCommentVNode)(" å¼‚å˜ Tab "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_incidents",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "incidents"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(Incidents, {
        ref_key: "incidents",
        ref: incidents
      }, null, 512) ], 2), (0, external_Vue_namespaceObject.createCommentVNode)(" å…¶ä»–è§’è‰² Tab "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_others",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "others"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(ContentOthers, {
        ref_key: "contentOthers",
        ref: contentOthers
      }, null, 512) ], 2), (0, external_Vue_namespaceObject.createCommentVNode)(" å±¥å†ä¸å…³ç³» Tab "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_bio",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "bio"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(ContentBio, {
        ref_key: "contentBio",
        ref: contentBio
      }, null, 512) ], 2), (0, external_Vue_namespaceObject.createCommentVNode)(" è®¾ç½® Tab "), (0, 
      external_Vue_namespaceObject.createElementVNode)("div", {
        id: "content_settings",
        class: (0, external_Vue_namespaceObject.normalizeClass)([ "status-tab-content", {
          active: activeTab.value === "settings"
        } ])
      }, [ (0, external_Vue_namespaceObject.createVNode)(ContentSettings, {
        ref_key: "contentSettings",
        ref: contentSettings
      }, null, 512) ], 2) ]), (0, external_Vue_namespaceObject.createCommentVNode)(" â–² [ç§»æ¤] ç»“æ„ç»“æŸ ") ]);
    };
  }
});

const StatusTabContent_exports_ = (0, exportHelper.A)(StatusTabContentvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-85b52c0a" ] ]);

const StatusTabContent = StatusTabContent_exports_;

const RoleCardvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "GensokyoOrigin-RoleCard-header"
};

const RoleCardvue_type_script_setup_true_lang_ts_hoisted_2 = {
  class: "GensokyoOrigin-RoleCard-avatar"
};

const RoleCardvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "GensokyoOrigin-RoleCard-name"
};

const RoleCardvue_type_script_setup_true_lang_ts_hoisted_4 = {
  class: "GensokyoOrigin-RoleCard-meta"
};

const RoleCardvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "RoleCard",
  props: {
    character: {},
    statWithoutMeta: {},
    runtime: {}
  },
  emits: [ "show-details" ],
  setup(__props) {
    const props = __props;
    const particleEmitter = (0, external_Vue_namespaceObject.ref)(null);
    const affectionValue = (0, external_Vue_namespaceObject.computed)(() => props.character?.["å¥½æ„Ÿåº¦"] || 0);
    const loveThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_LOVE_THRESHOLD, 100)));
    const hateThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_HATE_THRESHOLD, -100)));
    const affectionState = (0, external_Vue_namespaceObject.computed)(() => {
      if (affectionValue.value >= loveThreshold.value) return "love";
      if (affectionValue.value <= hateThreshold.value) return "hate";
      return "neutral";
    });
    (0, external_Vue_namespaceObject.watch)(affectionState, (newState, oldState) => {
      if (newState !== oldState && particleEmitter.value) {
        if (newState === "love") {
          particleEmitter.value.burst("heart", 10);
        } else if (newState === "hate") {
          particleEmitter.value.burst("skull", 8);
        }
      }
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", {
      class: "GensokyoOrigin-RoleCard-wrapper",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("show-details", __props.character))
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", RoleCardvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleCardvue_type_script_setup_true_lang_ts_hoisted_2, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character.name.slice(0, 1)), 1), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", null, [ (0, external_Vue_namespaceObject.createElementVNode)("div", RoleCardvue_type_script_setup_true_lang_ts_hoisted_3, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character.name), 1), (0, external_Vue_namespaceObject.createElementVNode)("div", RoleCardvue_type_script_setup_true_lang_ts_hoisted_4, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character["æ‰€åœ¨åœ°åŒº"] || "æœªçŸ¥"), 1) ]) ]), (0, 
    external_Vue_namespaceObject.createVNode)(AffectionDisplay, {
      character: __props.character,
      "stat-without-meta": __props.statWithoutMeta,
      runtime: __props.runtime,
      size: "small"
    }, null, 8, [ "character", "stat-without-meta", "runtime" ]), (0, external_Vue_namespaceObject.createVNode)(ParticleEmitter, {
      ref_key: "particleEmitter",
      ref: particleEmitter,
      active: affectionState.value === "love" || affectionState.value === "hate",
      "particle-type": affectionState.value === "hate" ? "skull" : "heart",
      "emission-rate": 2
    }, null, 8, [ "active", "particle-type" ]) ]));
  }
});

const RoleCard_exports_ = RoleCardvue_type_script_setup_true_lang_ts;

const RoleCard = RoleCard_exports_;

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "GensokyoOrigin-RoleDetailPopup-popup"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_2 = {
  class: "GensokyoOrigin-RoleDetailPopup-header"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "GensokyoOrigin-RoleDetailPopup-avatar"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_4 = {
  class: "GensokyoOrigin-RoleDetailPopup-name"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_5 = {
  class: "GensokyoOrigin-RoleDetailPopup-meta"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_6 = {
  class: "GensokyoOrigin-RoleDetailPopup-details-grid"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_7 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_8 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_9 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_10 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item"
};

const _hoisted_11 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item full-width"
};

const _hoisted_12 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item full-width"
};

const _hoisted_13 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item full-width"
};

const _hoisted_14 = {
  class: "GensokyoOrigin-RoleDetailPopup-detail-item full-width"
};

const RoleDetailPopupvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "RoleDetailPopup",
  props: {
    character: {},
    statWithoutMeta: {},
    runtime: {}
  },
  emits: [ "close" ],
  setup(__props) {
    const props = __props;
    const particleEmitter = (0, external_Vue_namespaceObject.ref)(null);
    const toText = v => {
      if (Array.isArray(v)) return v.length ? v.join("ï¼›") : "â€”";
      if (v == null || v === "") return "â€”";
      return String(v);
    };
    const affectionValue = (0, external_Vue_namespaceObject.computed)(() => props.character?.["å¥½æ„Ÿåº¦"] || 0);
    const loveThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_LOVE_THRESHOLD, 100)));
    const hateThreshold = (0, external_Vue_namespaceObject.computed)(() => Number(get(props.statWithoutMeta, ERA_VARIABLE_PATH.AFFECTION_HATE_THRESHOLD, -100)));
    const affectionState = (0, external_Vue_namespaceObject.computed)(() => {
      if (affectionValue.value >= loveThreshold.value) return "love";
      if (affectionValue.value <= hateThreshold.value) return "hate";
      return "neutral";
    });
    (0, external_Vue_namespaceObject.watch)(affectionState, (newState, oldState) => {
      if (newState !== oldState && particleEmitter.value) {
        if (newState === "love") {
          particleEmitter.value.burst("heart", 15);
        } else if (newState === "hate") {
          particleEmitter.value.burst("skull", 12);
        }
      }
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", {
      class: "GensokyoOrigin-RoleDetailPopup-overlay",
      onClick: _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.withModifiers)($event => _ctx.$emit("close"), [ "self" ]))
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("button", {
      class: "GensokyoOrigin-RoleDetailPopup-close-btn",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("close"))
    }, "Ã—"), (0, external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_2, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_3, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character.name.slice(0, 1)), 1), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", null, [ (0, external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_4, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character.name), 1), (0, external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_5, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.character["æ‰€åœ¨åœ°åŒº"] || "æœªçŸ¥"), 1) ]) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_6, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_7, [ _cache[2] || (_cache[2] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "å¹´é¾„:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["å¹´é¾„"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_8, [ _cache[3] || (_cache[3] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "æ€§åˆ«:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["æ€§åˆ«"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_9, [ _cache[4] || (_cache[4] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "èº«ä»½:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["èº«ä»½"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", RoleDetailPopupvue_type_script_setup_true_lang_ts_hoisted_10, [ _cache[5] || (_cache[5] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "å±…ä½åœ°:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["å±…ä½åœ°åŒº"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_11, [ _cache[6] || (_cache[6] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "æ€§æ ¼:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["æ€§æ ¼"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_12, [ _cache[7] || (_cache[7] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "å¤–è²Œ:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["å¤–è²Œ"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_13, [ _cache[8] || (_cache[8] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "äººé™…å…³ç³»:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["äººé™…å…³ç³»"])), 1) ]), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", _hoisted_14, [ _cache[9] || (_cache[9] = (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, "å½“å‰ç›®æ ‡:", -1)), (0, 
    external_Vue_namespaceObject.createTextVNode)(" " + (0, external_Vue_namespaceObject.toDisplayString)(toText(__props.character["å½“å‰ç›®æ ‡"])), 1) ]) ]), (0, 
    external_Vue_namespaceObject.createVNode)(AffectionDisplay, {
      character: __props.character,
      "stat-without-meta": __props.statWithoutMeta,
      runtime: __props.runtime,
      size: "large"
    }, null, 8, [ "character", "stat-without-meta", "runtime" ]), (0, external_Vue_namespaceObject.createVNode)(ParticleEmitter, {
      ref_key: "particleEmitter",
      ref: particleEmitter,
      active: affectionState.value === "love" || affectionState.value === "hate",
      "particle-type": affectionState.value === "hate" ? "skull" : "heart",
      "emission-rate": 3
    }, null, 8, [ "active", "particle-type" ]) ]) ]));
  }
});

const RoleDetailPopup_exports_ = RoleDetailPopupvue_type_script_setup_true_lang_ts;

const RoleDetailPopup = RoleDetailPopup_exports_;

const RoleRibbonContainervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "role-ribbon-container"
};

const RoleRibbonContainervue_type_script_setup_true_lang_ts_hoisted_2 = {
  key: 0,
  class: "role-card-placeholder"
};

const RoleRibbonContainervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "RoleRibbonContainer",
  setup(__props, {expose: __expose}) {
    const ribbon = (0, external_Vue_namespaceObject.ref)(null);
    const allCharacters = (0, external_Vue_namespaceObject.ref)({});
    const userLocation = (0, external_Vue_namespaceObject.ref)("");
    const ribbonScrollStep = (0, external_Vue_namespaceObject.ref)(320);
    const selectedCharacter = (0, external_Vue_namespaceObject.ref)(null);
    const statWithoutMeta = (0, external_Vue_namespaceObject.ref)({});
    const runtime = (0, external_Vue_namespaceObject.ref)({});
    const nearbyCharacters = (0, external_Vue_namespaceObject.computed)(() => {
      if (!userLocation.value || !Object.keys(allCharacters.value).length) {
        return [];
      }
      return Object.entries(allCharacters.value).filter(([, v]) => v && typeof v === "object" && String(get(v, ERA_VARIABLE_PATH.CHAR_LOCATION, "")).trim() === userLocation.value).map(([name, data]) => Object.assign({
        name
      }, data));
    });
    const scroll = direction => {
      ribbon.value?.scrollBy({
        left: direction * ribbonScrollStep.value,
        behavior: "smooth"
      });
    };
    const updateRibbon = context => {
      const newStat = context?.statWithoutMeta;
      if (!newStat || typeof newStat !== "object") return;
      statWithoutMeta.value = newStat;
      runtime.value = context.runtime || {};
      userLocation.value = String(get(newStat, ERA_VARIABLE_PATH.USER_LOCATION, "")).trim();
      let chars = newStat?.[ERA_VARIABLE_PATH.CHARS];
      try {
        if (typeof chars === "string") chars = JSON.parse(chars);
      } catch {
        chars = {};
      }
      allCharacters.value = chars || {};
      ribbonScrollStep.value = Number(get(newStat, ERA_VARIABLE_PATH.UI_RIBBON_STEP, 320)) || 320;
    };
    __expose({
      updateRibbon
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", RoleRibbonContainervue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("button", {
      id: "ribbon-left",
      class: "ribbon-arrow left",
      onClick: _cache[0] || (_cache[0] = $event => scroll(-1))
    }, "â€¹"), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "ribbon-right",
      class: "ribbon-arrow right",
      onClick: _cache[1] || (_cache[1] = $event => scroll(1))
    }, "â€º"), (0, external_Vue_namespaceObject.createElementVNode)("div", {
      id: "role-ribbon",
      ref_key: "ribbon",
      ref: ribbon,
      class: "role-ribbon"
    }, [ ((0, external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(nearbyCharacters.value, char => ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createBlock)(RoleCard, {
      key: char.name,
      character: char,
      "stat-without-meta": statWithoutMeta.value,
      runtime: runtime.value,
      onShowDetails: _cache[2] || (_cache[2] = $event => selectedCharacter.value = $event)
    }, null, 8, [ "character", "stat-without-meta", "runtime" ]))), 128)), !nearbyCharacters.value.length ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", RoleRibbonContainervue_type_script_setup_true_lang_ts_hoisted_2, "é™„è¿‘æš‚æ— è§’è‰²")) : (0, 
    external_Vue_namespaceObject.createCommentVNode)("v-if", true) ], 512), selectedCharacter.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(RoleDetailPopup, {
      key: 0,
      character: selectedCharacter.value,
      "stat-without-meta": statWithoutMeta.value,
      runtime: runtime.value,
      onClose: _cache[3] || (_cache[3] = $event => selectedCharacter.value = null)
    }, null, 8, [ "character", "stat-without-meta", "runtime" ])) : (0, external_Vue_namespaceObject.createCommentVNode)("v-if", true) ]));
  }
});

const RoleRibbonContainer_exports_ = (0, exportHelper.A)(RoleRibbonContainervue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-8ed81600" ] ]);

const RoleRibbonContainer = RoleRibbonContainer_exports_;

const TimeButtonClosedvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "TimeButtonClosed",
  props: {
    clockInfo: {}
  },
  emits: [ "open-calendar" ],
  setup(__props) {
    const props = __props;
    const timeText = (0, external_Vue_namespaceObject.computed)(() => {
      if (!props.clockInfo) return "â€”:â€”";
      return props.clockInfo.hm ? `${props.clockInfo.hm} Â· ${props.clockInfo.periodName || ""}` : props.clockInfo.iso || "â€”";
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      id: "banner-time-closed",
      class: "banner-chip",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("open-calendar"))
    }, [ _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "â°", -1)), (0, external_Vue_namespaceObject.createElementVNode)("span", null, (0, 
    external_Vue_namespaceObject.toDisplayString)(timeText.value), 1) ]));
  }
});

const TimeButtonClosed_exports_ = (0, exportHelper.A)(TimeButtonClosedvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-37a35e60" ] ]);

const TimeButtonClosed = TimeButtonClosed_exports_;

const TimeButtonOpenvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "TimeButtonOpen",
  emits: [ "close-calendar" ],
  setup(__props) {
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      id: "banner-time-open",
      class: "banner-chip-open",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("close-calendar"))
    }, [ ..._cache[1] || (_cache[1] = [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ“…", -1), (0, external_Vue_namespaceObject.createElementVNode)("span", null, "æ—¥å†", -1), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", {
      class: "close-icon"
    }, "æ”¶èµ·", -1) ]) ]));
  }
});

const TimeButtonOpen_exports_ = (0, exportHelper.A)(TimeButtonOpenvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-a8d897e6" ] ]);

const TimeButtonOpen = TimeButtonOpen_exports_;

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "cal-day-container"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_2 = [ "data-importance" ];

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "dnum"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_4 = {
  key: 1,
  class: "cal-day-placeholder"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_5 = {
  key: 2,
  class: "fest-popover"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_6 = {
  class: "fest-header"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_7 = {
  class: "fest-host"
};

const CalendarDayvue_type_script_setup_true_lang_ts_hoisted_8 = {
  class: "fest-customs"
};

const CalendarDayvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "CalendarDay",
  props: {
    day: {}
  },
  setup(__props) {
    const props = __props;
    const hasFestivals = (0, external_Vue_namespaceObject.computed)(() => !!(props.day.festivals && props.day.festivals.length > 0));
    const showPopover = (0, external_Vue_namespaceObject.ref)(false);
    const highestImportance = (0, external_Vue_namespaceObject.computed)(() => {
      if (!hasFestivals.value || !props.day.festivals) return 0;
      return Math.max(...props.day.festivals.map(f => f.importance));
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_1, [ !__props.day.isPlaceholder ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      key: 0,
      type: "button",
      class: (0, external_Vue_namespaceObject.normalizeClass)([ "cal-day-btn", {
        today: __props.day.isToday,
        "has-fest": hasFestivals.value
      } ]),
      "data-importance": highestImportance.value,
      onMouseenter: _cache[0] || (_cache[0] = $event => showPopover.value = hasFestivals.value),
      onMouseleave: _cache[1] || (_cache[1] = $event => showPopover.value = false)
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_3, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.day.date), 1) ], 42, CalendarDayvue_type_script_setup_true_lang_ts_hoisted_2)) : ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_4)), showPopover.value && hasFestivals.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_5, [ ((0, 
    external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(__props.day.festivals, fest => ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createElementBlock)("div", {
      key: fest.name,
      class: "fest-item"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("div", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_6, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("strong", null, (0, external_Vue_namespaceObject.toDisplayString)(fest.name), 1), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_7, "@ " + (0, 
    external_Vue_namespaceObject.toDisplayString)(fest.ä¸»åŠåœ°), 1) ]), (0, external_Vue_namespaceObject.createElementVNode)("ul", CalendarDayvue_type_script_setup_true_lang_ts_hoisted_8, [ ((0, 
    external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(fest.customs, (custom, index) => ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createElementBlock)("li", {
      key: index
    }, (0, external_Vue_namespaceObject.toDisplayString)(custom), 1))), 128)) ]) ]))), 128)) ])) : (0, 
    external_Vue_namespaceObject.createCommentVNode)("v-if", true) ]));
  }
});

const CalendarDay_exports_ = (0, exportHelper.A)(CalendarDayvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-35064b7e" ] ]);

const CalendarDay = CalendarDay_exports_;

const CalendarContentvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "cal-content",
  class: "cal-content",
  role: "region"
};

const CalendarContentvue_type_script_setup_true_lang_ts_hoisted_2 = {
  class: "cal-head"
};

const CalendarContentvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "cal-nav"
};

const CalendarContentvue_type_script_setup_true_lang_ts_hoisted_4 = {
  class: "cal-body"
};

const CalendarContentvue_type_script_setup_true_lang_ts_hoisted_5 = {
  id: "cal-grid",
  class: "cal-grid"
};

const CalendarContentvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "CalendarContent",
  props: {
    clockInfo: {}
  },
  setup(__props) {
    const props = __props;
    const displayMonth = (0, external_Vue_namespaceObject.ref)(new Date);
    const festivals = (0, external_Vue_namespaceObject.computed)(() => props.clockInfo?.festivals || []);
    const updateMonth = direction => {
      const newMonth = new Date(displayMonth.value);
      newMonth.setMonth(newMonth.getMonth() + (direction === "prev" ? -1 : 1));
      displayMonth.value = newMonth;
    };
    const resetMonth = () => {
      displayMonth.value = props.clockInfo?.iso ? new Date(props.clockInfo.iso) : new Date;
    };
    const calendarDays = (0, external_Vue_namespaceObject.computed)(() => {
      if (!props.clockInfo) return [];
      const year = displayMonth.value.getFullYear();
      const month = displayMonth.value.getMonth();
      const today = props.clockInfo.iso ? new Date(props.clockInfo.iso) : new Date;
      const firstDayOfMonth = new Date(year, month, 1);
      const lastDayOfMonth = new Date(year, month + 1, 0);
      const daysInMonth = lastDayOfMonth.getDate();
      const startDayOfWeek = (firstDayOfMonth.getDay() + 6) % 7;
      const days = [];
      for (let i = 0; i < startDayOfWeek; i++) {
        days.push({
          isPlaceholder: true
        });
      }
      for (let i = 1; i <= daysInMonth; i++) {
        const dayFestivals = festivals.value.filter(f => f.month === month + 1 && i >= f.start_day && i <= f.end_day);
        const isToday = year === today.getFullYear() && month === today.getMonth() && i === today.getDate();
        days.push({
          date: i,
          isToday,
          isPlaceholder: false,
          festivals: dayFestivals
        });
      }
      return days;
    });
    (0, external_Vue_namespaceObject.watch)(displayMonth, newDate => {
      const monthStr = `${newDate.getMonth() + 1}æœˆ`;
      const yearStr = `${newDate.getFullYear()}å¹´`;
      format_text("cal-month", monthStr);
      format_text("cal-year", yearStr);
    }, {
      immediate: true
    });
    (0, external_Vue_namespaceObject.watch)(() => props.clockInfo, newClockInfo => {
      if (newClockInfo?.iso) {
        displayMonth.value = new Date(newClockInfo.iso);
      }
    }, {
      immediate: true
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", CalendarContentvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("div", CalendarContentvue_type_script_setup_true_lang_ts_hoisted_2, [ _cache[2] || (_cache[2] = (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      class: "cal-title"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      id: "cal-month",
      class: "month"
    }, "â€”æœˆ"), (0, external_Vue_namespaceObject.createElementVNode)("span", {
      id: "cal-year",
      class: "year"
    }, "â€”å¹´") ], -1)), (0, external_Vue_namespaceObject.createElementVNode)("div", CalendarContentvue_type_script_setup_true_lang_ts_hoisted_3, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("button", {
      id: "cal-prev",
      class: "cal-btn",
      title: "ä¸Šä¸€æœˆ",
      onClick: _cache[0] || (_cache[0] = $event => updateMonth("prev"))
    }, "â—€"), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "cal-today",
      class: "cal-btn",
      title: "å›åˆ°ä»Šå¤©",
      onClick: resetMonth
    }, "â—"), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "cal-next",
      class: "cal-btn",
      title: "ä¸‹ä¸€æœˆ",
      onClick: _cache[1] || (_cache[1] = $event => updateMonth("next"))
    }, "â–¶") ]) ]), (0, external_Vue_namespaceObject.createElementVNode)("div", CalendarContentvue_type_script_setup_true_lang_ts_hoisted_4, [ _cache[3] || (_cache[3] = (0, 
    external_Vue_namespaceObject.createStaticVNode)('<div class="cal-week" data-v-03881b10><div class="w" data-v-03881b10>ä¸€</div><div class="w" data-v-03881b10>äºŒ</div><div class="w" data-v-03881b10>ä¸‰</div><div class="w" data-v-03881b10>å››</div><div class="w" data-v-03881b10>äº”</div><div class="w" data-v-03881b10>å…­</div><div class="w" data-v-03881b10>æ—¥</div></div>', 1)), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", CalendarContentvue_type_script_setup_true_lang_ts_hoisted_5, [ ((0, 
    external_Vue_namespaceObject.openBlock)(true), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, (0, 
    external_Vue_namespaceObject.renderList)(calendarDays.value, (day, index) => ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(CalendarDay, {
      key: index,
      day
    }, null, 8, [ "day" ]))), 128)) ]) ]) ]));
  }
});

const CalendarContent_exports_ = (0, exportHelper.A)(CalendarContentvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-03881b10" ] ]);

const CalendarContent = CalendarContent_exports_;

const TimeContainervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "time-container"
};

const TimeContainervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "TimeContainer",
  props: {
    clockInfo: {}
  },
  setup(__props) {
    const calendarVisible = (0, external_Vue_namespaceObject.ref)(false);
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", TimeContainervue_type_script_setup_true_lang_ts_hoisted_1, [ !calendarVisible.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(TimeButtonClosed, {
      key: 0,
      onOpenCalendar: _cache[0] || (_cache[0] = $event => calendarVisible.value = true),
      "clock-info": __props.clockInfo
    }, null, 8, [ "clock-info" ])) : ((0, external_Vue_namespaceObject.openBlock)(), 
    (0, external_Vue_namespaceObject.createBlock)(TimeButtonOpen, {
      key: 1,
      onCloseCalendar: _cache[1] || (_cache[1] = $event => calendarVisible.value = false)
    })), (0, external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createVNode)(CalendarContent, {
      "clock-info": __props.clockInfo
    }, null, 8, [ "clock-info" ]), [ [ external_Vue_namespaceObject.vShow, calendarVisible.value ] ]) ]));
  }
});

const TimeContainer_exports_ = (0, exportHelper.A)(TimeContainervue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-66815921" ] ]);

const TimeContainer = TimeContainer_exports_;

const WeatherButtonClosedvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "WeatherButtonClosed",
  props: {
    weather: {}
  },
  emits: [ "open-weather" ],
  setup(__props) {
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      id: "banner-weather-closed",
      class: "banner-chip",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("open-weather"))
    }, [ _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "â˜€ï¸", -1)), (0, external_Vue_namespaceObject.createElementVNode)("span", null, (0, 
    external_Vue_namespaceObject.toDisplayString)(__props.weather || "â€”"), 1) ]));
  }
});

const WeatherButtonClosed_exports_ = (0, exportHelper.A)(WeatherButtonClosedvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-11b37370" ] ]);

const WeatherButtonClosed = WeatherButtonClosed_exports_;

const WeatherButtonOpenvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "WeatherButtonOpen",
  emits: [ "close-weather" ],
  setup(__props) {
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      id: "banner-weather-open",
      class: "banner-chip-open",
      onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit("close-weather"))
    }, [ ..._cache[1] || (_cache[1] = [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸŒ¦ï¸", -1), (0, external_Vue_namespaceObject.createElementVNode)("span", null, "å¤©æ°”è¯¦æƒ…", -1), (0, 
    external_Vue_namespaceObject.createElementVNode)("span", {
      class: "close-icon"
    }, "æ”¶èµ·", -1) ]) ]));
  }
});

const WeatherButtonOpen_exports_ = (0, exportHelper.A)(WeatherButtonOpenvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-1a6d77c8" ] ]);

const WeatherButtonOpen = WeatherButtonOpen_exports_;

const WeatherContentvue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "weather-content"
};

const WeatherContentvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "WeatherContent",
  props: {
    weather: {}
  },
  setup(__props) {
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", WeatherContentvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createElementVNode)("p", null, "å½“å‰å¤©æ°”: " + (0, external_Vue_namespaceObject.toDisplayString)(__props.weather || "æœªçŸ¥"), 1), _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("p", null, [ (0, external_Vue_namespaceObject.createElementVNode)("em", null, "(æœªæ¥å¯æ‰©å……å¤©æ°”é¢„æŠ¥ç­‰è¯¦ç»†ä¿¡æ¯)") ], -1)) ]));
  }
});

const WeatherContent_exports_ = (0, exportHelper.A)(WeatherContentvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-16c06ed4" ] ]);

const WeatherContent = WeatherContent_exports_;

const WeatherContainervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "weather-container"
};

const WeatherContainervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "WeatherContainer",
  props: {
    weather: {}
  },
  setup(__props) {
    const weatherVisible = (0, external_Vue_namespaceObject.ref)(false);
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", WeatherContainervue_type_script_setup_true_lang_ts_hoisted_1, [ !weatherVisible.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(WeatherButtonClosed, {
      key: 0,
      onOpenWeather: _cache[0] || (_cache[0] = $event => weatherVisible.value = true),
      weather: __props.weather
    }, null, 8, [ "weather" ])) : ((0, external_Vue_namespaceObject.openBlock)(), (0, 
    external_Vue_namespaceObject.createBlock)(WeatherButtonOpen, {
      key: 1,
      onCloseWeather: _cache[1] || (_cache[1] = $event => weatherVisible.value = false)
    })), (0, external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createVNode)(WeatherContent, {
      weather: __props.weather
    }, null, 8, [ "weather" ]), [ [ external_Vue_namespaceObject.vShow, weatherVisible.value ] ]) ]));
  }
});

const WeatherContainer_exports_ = (0, exportHelper.A)(WeatherContainervue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-cb64d90a" ] ]);

const WeatherContainer = WeatherContainer_exports_;

const StatusBannerContentvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "status-banner",
  class: "status-banner"
};

const StatusBannerContentvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "StatusBannerContent",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/StatusBanner/StatusBannerContent");
    const clockInfo = (0, external_Vue_namespaceObject.ref)(null);
    const weather = (0, external_Vue_namespaceObject.ref)(null);
    const update = context => {
      const funcName = "update";
      const {statWithoutMeta, runtime} = context || {};
      logger.log(funcName, "çŠ¶æ€æ¨ªå¹…å†…å®¹åŒºå¼€å§‹æ›´æ–°ï¼Œæ¥æ”¶åˆ°çš„ contextï¼š", context);
      if (!statWithoutMeta || typeof statWithoutMeta !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ context æˆ– statWithoutMeta æ— æ•ˆã€‚", context);
        return;
      }
      weather.value = external_default().get(statWithoutMeta, "ä¸–ç•Œ.å¤©æ°”", "â€”");
      const clockNow = external_default().get(runtime, "clock.now", null);
      const festivals = external_default().get(statWithoutMeta, "festivals_list", []);
      if (clockNow && typeof clockNow === "object") {
        clockInfo.value = {
          ...clockNow,
          festivals
        };
      } else {
        logger.warn(funcName, "æœªåœ¨ state ä¸­æ‰¾åˆ° runtime.clock.now æˆ–å…¶æ ¼å¼ä¸æ­£ç¡®");
      }
    };
    __expose({
      update
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, [ (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ===== çŠ¶æ€æ¨ªå¹…ï¼šæ—¶é—´ï¼ˆå¯ç‚¹å¼¹æ—¥å†ï¼‰ | å¤©æ°”ï¼ˆé¢„ç•™ç‚¹å‡»ï¼‰ ===== "), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", StatusBannerContentvue_type_script_setup_true_lang_ts_hoisted_1, [ _cache[0] || (_cache[0] = (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      class: "banner-title"
    }, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ“¡"), (0, external_Vue_namespaceObject.createElementVNode)("span", null, "ä¸–ç•ŒçŠ¶æ€") ], -1)), (0, 
    external_Vue_namespaceObject.createCommentVNode)(" æ—¥æœŸå’Œæ—¥å†ç»„ä»¶ "), (0, external_Vue_namespaceObject.createVNode)(TimeContainer, {
      ref: "timeContainer",
      "clock-info": clockInfo.value
    }, null, 8, [ "clock-info" ]), _cache[1] || (_cache[1] = (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "banner-sep",
      "aria-hidden": "true"
    }, null, -1)), (0, external_Vue_namespaceObject.createCommentVNode)(" å¤©æ°”ç»„ä»¶ "), (0, 
    external_Vue_namespaceObject.createVNode)(WeatherContainer, {
      weather: weather.value
    }, null, 8, [ "weather" ]) ]) ], 2112));
  }
});

const StatusBannerContent_exports_ = (0, exportHelper.A)(StatusBannerContentvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-d441cb92" ] ]);

const StatusBannerContent = StatusBannerContent_exports_;

const AyaNewsButtonClosedvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "AyaNewsButtonClosed",
  emits: [ "open-news" ],
  setup(__props, {emit: __emit}) {
    const emit = __emit;
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      class: "aya-news-button-closed",
      onClick: _cache[0] || (_cache[0] = $event => emit("open-news"))
    }, "æ–‡æ–‡æ–°é—»"));
  }
});

const AyaNewsButtonClosed_exports_ = (0, exportHelper.A)(AyaNewsButtonClosedvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-b15bd7b0" ] ]);

const AyaNewsButtonClosed = AyaNewsButtonClosed_exports_;

const AyaNewsButtonOpenvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "AyaNewsButtonOpen",
  emits: [ "close-news" ],
  setup(__props, {emit: __emit}) {
    const emit = __emit;
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      class: "aya-news-button-open",
      onClick: _cache[0] || (_cache[0] = $event => emit("close-news"))
    }, "æ–‡æ–‡æ–°é—»"));
  }
});

const AyaNewsButtonOpen_exports_ = (0, exportHelper.A)(AyaNewsButtonOpenvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-4b56fc8f" ] ]);

const AyaNewsButtonOpen = AyaNewsButtonOpen_exports_;

const AyaNewsPopupvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "aya-news-popup",
  class: "aya-news-popup",
  role: "dialog"
};

const AyaNewsPopupvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "AyaNewsPopup",
  emits: [ "close" ],
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/AyaNews/AyaNewsPopup");
    const updateNews = statWithoutMeta => {
      const funcName = "updateNews";
      if (!statWithoutMeta || typeof statWithoutMeta !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ statWithoutMeta æ— æ•ˆã€‚", statWithoutMeta);
        return;
      }
      try {
        const newsContent = get(statWithoutMeta, ERA_VARIABLE_PATH.NEWS_TEXT, "");
        logger.log(funcName, "å°†æ›´æ–°æ–°é—»æ–‡æœ¬", {
          preview: String(newsContent).slice(0, 50)
        });
        format_text("aya-news-content-popup", newsContent);
        logger.debug(funcName, "æ–°é—»æ–‡æœ¬å·²å†™å…¥ DOM å®Œæˆ");
      } catch (e) {
        logger.error(funcName, "æ›´æ–°æ–°é—»å†…å®¹æ—¶å‘ç”Ÿå¼‚å¸¸", e);
      }
    };
    __expose({
      updateNews
    });
    (0, external_Vue_namespaceObject.onMounted)(() => {});
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", AyaNewsPopupvue_type_script_setup_true_lang_ts_hoisted_1, [ ..._cache[0] || (_cache[0] = [ (0, 
    external_Vue_namespaceObject.createElementVNode)("h4", null, [ (0, external_Vue_namespaceObject.createElementVNode)("span", {
      class: "emoji"
    }, "ğŸ“°"), (0, external_Vue_namespaceObject.createTextVNode)("æ–‡æ–‡æ–°é—»") ], -1), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", {
      id: "aya-news-content-popup",
      class: "news-body preserve-format"
    }, "â€”", -1) ]) ]));
  }
});

const AyaNewsPopup_exports_ = (0, exportHelper.A)(AyaNewsPopupvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-36e7fa95" ] ]);

const AyaNewsPopup = AyaNewsPopup_exports_;

const AyaNewsContainervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "aya-news-container"
};

const AyaNewsContainervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "AyaNewsContainer",
  setup(__props, {expose: __expose}) {
    const newsVisible = (0, external_Vue_namespaceObject.ref)(false);
    const ayaNewsPopup = (0, external_Vue_namespaceObject.ref)(null);
    __expose({
      updateNews: state => {
        ayaNewsPopup.value?.updateNews(state);
      }
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", AyaNewsContainervue_type_script_setup_true_lang_ts_hoisted_1, [ !newsVisible.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(AyaNewsButtonClosed, {
      key: 0,
      onOpenNews: _cache[0] || (_cache[0] = $event => newsVisible.value = true)
    })) : ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(AyaNewsButtonOpen, {
      key: 1,
      onCloseNews: _cache[1] || (_cache[1] = $event => newsVisible.value = false)
    })), (0, external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createVNode)(AyaNewsPopup, {
      ref_key: "ayaNewsPopup",
      ref: ayaNewsPopup
    }, null, 512), [ [ external_Vue_namespaceObject.vShow, newsVisible.value ] ]) ]));
  }
});

const AyaNewsContainer_exports_ = (0, exportHelper.A)(AyaNewsContainervue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-313602e6" ] ]);

const AyaNewsContainer = AyaNewsContainer_exports_;

const UserStateButtonClosedvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "UserStateButtonClosed",
  emits: [ "open-sidebar" ],
  setup(__props, {emit: __emit}) {
    const emit = __emit;
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      class: "user-state-button-closed",
      onClick: _cache[0] || (_cache[0] = $event => emit("open-sidebar"))
    }, "ç”¨æˆ·ä¿¡æ¯"));
  }
});

const UserStateButtonClosed_exports_ = (0, exportHelper.A)(UserStateButtonClosedvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-89abe3c0" ] ]);

const UserStateButtonClosed = UserStateButtonClosed_exports_;

const UserStateButtonOpenvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "UserStateButtonOpen",
  emits: [ "close-sidebar" ],
  setup(__props, {emit: __emit}) {
    const emit = __emit;
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("button", {
      class: "user-state-button-open",
      onClick: _cache[0] || (_cache[0] = $event => emit("close-sidebar"))
    }, "ç”¨æˆ·ä¿¡æ¯"));
  }
});

const UserStateButtonOpen_exports_ = (0, exportHelper.A)(UserStateButtonOpenvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-682280a6" ] ]);

const UserStateButtonOpen = UserStateButtonOpen_exports_;

const UserStatePopupvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "user-state-popup",
  class: "user-state-popup",
  role: "region",
  "aria-label": "ç”¨æˆ·çŠ¶æ€"
};

const UserStatePopupvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "UserStatePopup",
  emits: [ "close" ],
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/UserState/UserStatePopup");
    const style = (0, external_Vue_namespaceObject.ref)({});
    const positionPopup = _anchorEl => {
      style.value = {};
    };
    const updateUserStatus = (userData, anchorEl) => {
      if (anchorEl) {
        positionPopup(anchorEl);
      }
      const funcName = "updateUserStatus";
      logger.debug(funcName, "å‡½æ•°å…¥å£ï¼Œæ¥æ”¶åˆ°çš„ userData:", userData);
      if (!userData || typeof userData !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ userData æ— æ•ˆã€‚", userData);
        return;
      }
      const map = [ [ "user-name-popup", "å§“å" ], [ "user-identity-popup", "èº«ä»½" ], [ "user-gender-popup", "æ€§åˆ«" ], [ "user-age-popup", "å¹´é¾„" ], [ "user-abilities-popup", "ç‰¹æ®Šèƒ½åŠ›" ], [ "user-location-popup", "æ‰€åœ¨åœ°åŒº" ], [ "user-home-popup", "å±…ä½åœ°åŒº" ] ];
      map.forEach(([id, key]) => {
        const value = get(userData, key, "â€”");
        logger.debug(funcName, `[æ•°æ®è·å–] ä» key '${key}' è·å–åˆ° value:`, value);
        logger.debug(funcName, `[å†™å…¥DOM] å‡†å¤‡å‘ #${id} å†™å…¥å†…å®¹:`, value);
        format_text(id, value);
      });
      logger.debug(funcName, "æ‰€æœ‰å­—æ®µæ›´æ–°å®Œæˆã€‚");
    };
    __expose({
      updateUserStatus,
      positionPopup
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", UserStatePopupvue_type_script_setup_true_lang_ts_hoisted_1, [ ..._cache[0] || (_cache[0] = [ (0, 
    external_Vue_namespaceObject.createStaticVNode)('<h4 data-v-61061915><span class="emoji" data-v-61061915>ğŸ‘¤</span>ç”¨æˆ·çŠ¶æ€</h4><div class="sidebar-content" data-v-61061915><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>ğŸ“</span>å§“å:</span> <span id="user-name-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>ğŸªª</span>èº«ä»½:</span> <span id="user-identity-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>âš§ï¸</span>æ€§åˆ«:</span> <span id="user-gender-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>ğŸ‚</span>å¹´é¾„:</span> <span id="user-age-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>âœ¨</span>ç‰¹æ®Šèƒ½åŠ›:</span> <span id="user-abilities-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>ğŸ“</span>æ‰€åœ¨åœ°åŒº:</span> <span id="user-location-popup" data-v-61061915>â€”</span></p><p data-v-61061915><span class="label" data-v-61061915><span class="emoji" data-v-61061915>ğŸ </span>å±…ä½åœ°åŒº:</span> <span id="user-home-popup" data-v-61061915>â€”</span></p></div>', 2) ]) ]));
  }
});

const UserStatePopup_exports_ = (0, exportHelper.A)(UserStatePopupvue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-61061915" ] ]);

const UserStatePopup = UserStatePopup_exports_;

const UserStateContainervue_type_script_setup_true_lang_ts_hoisted_1 = {
  class: "user-state-container"
};

const UserStateContainervue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "UserStateContainer",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/UserState/UserStateContainer");
    const sidebarVisible = (0, external_Vue_namespaceObject.ref)(false);
    const userStatePopup = (0, external_Vue_namespaceObject.ref)(null);
    __expose({
      updateUserStatus: userData => {
        logger.debug("updateUserStatus", "æ›´æ–°ç”¨æˆ·çŠ¶æ€æ•°æ®", userData);
        userStatePopup.value?.updateUserStatus(userData);
      }
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", UserStateContainervue_type_script_setup_true_lang_ts_hoisted_1, [ !sidebarVisible.value ? ((0, 
    external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(UserStateButtonClosed, {
      key: 0,
      onOpenSidebar: _cache[0] || (_cache[0] = $event => sidebarVisible.value = true)
    })) : ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createBlock)(UserStateButtonOpen, {
      key: 1,
      onCloseSidebar: _cache[1] || (_cache[1] = $event => sidebarVisible.value = false)
    })), (0, external_Vue_namespaceObject.withDirectives)((0, external_Vue_namespaceObject.createVNode)(UserStatePopup, {
      ref_key: "userStatePopup",
      ref: userStatePopup
    }, null, 512), [ [ external_Vue_namespaceObject.vShow, sidebarVisible.value ] ]) ]));
  }
});

const UserStateContainer_exports_ = (0, exportHelper.A)(UserStateContainervue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-182f4ef4" ] ]);

const UserStateContainer = UserStateContainer_exports_;

const ThemeTogglevue_type_script_setup_true_lang_ts_hoisted_1 = [ "aria-label", "title", "aria-pressed" ];

const LIGHT = "light";

const DARK = "dark";

const ThemeTogglevue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "ThemeToggle",
  setup(__props, {expose: __expose}) {
    const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢/components/ThemeToggle");
    const currentTheme = (0, external_Vue_namespaceObject.ref)(LIGHT);
    const icon = (0, external_Vue_namespaceObject.computed)(() => currentTheme.value === LIGHT ? "ğŸŒ™" : "ğŸŒ");
    const ariaLabel = (0, external_Vue_namespaceObject.computed)(() => currentTheme.value === LIGHT ? "åˆ‡æ¢ä¸ºé»‘å¤œæ¨¡å¼" : "åˆ‡æ¢ä¸ºç™½æ—¥æ¨¡å¼");
    const title = (0, external_Vue_namespaceObject.computed)(() => currentTheme.value === LIGHT ? "åˆ‡æ¢ä¸ºé»‘å¤œæ¨¡å¼" : "åˆ‡æ¢ä¸ºç™½æ—¥æ¨¡å¼");
    const isDark = (0, external_Vue_namespaceObject.computed)(() => currentTheme.value === DARK);
    const applyThemeToDOM = theme => {
      const root = document.documentElement;
      if (root) {
        root.setAttribute("data-theme", theme);
        logger.log("applyThemeToDOM", `å·²å°†ä¸»é¢˜åº”ç”¨åˆ° DOM: ${theme}`);
      } else {
        logger.warn("applyThemeToDOM", "æœªæ‰¾åˆ° document.documentElement å…ƒç´ ã€‚");
      }
    };
    const updateTheme = context => {
      const funcName = "updateTheme";
      const {statWithoutMeta} = context || {};
      if (!statWithoutMeta || typeof statWithoutMeta !== "object") {
        logger.warn(funcName, "è°ƒç”¨å¤±è´¥ï¼šä¼ å…¥çš„ context æˆ– statWithoutMeta æ— æ•ˆã€‚", context);
        return;
      }
      const newTheme = get(statWithoutMeta, ERA_VARIABLE_PATH.UI_THEME, LIGHT);
      const validatedTheme = newTheme === DARK ? DARK : LIGHT;
      currentTheme.value = validatedTheme;
      applyThemeToDOM(validatedTheme);
      logger.log(funcName, `ä» statWithoutMeta æ›´æ–°ä¸»é¢˜ä¸º: ${validatedTheme}`);
    };
    (0, external_Vue_namespaceObject.onMounted)(() => {
      const funcName = "onMounted";
      const btn = document.getElementById("theme-toggle");
      if (btn) {
        btn.onclick = () => {
          const nextTheme = currentTheme.value === DARK ? LIGHT : DARK;
          logger.log(`${funcName}:onclick`, `æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå‡†å¤‡åˆ‡æ¢åˆ°ä¸»é¢˜: ${nextTheme}`);
          currentTheme.value = nextTheme;
          applyThemeToDOM(nextTheme);
          updateEraVariable(ERA_VARIABLE_PATH.UI_THEME, nextTheme);
          logger.log(`${funcName}:onclick`, `å·²é€šè¿‡ eraWriter è¯·æ±‚æ›´æ–°ä¸»é¢˜å˜é‡ä¸º: ${nextTheme}`);
        };
        logger.log(funcName, "ä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å·²æˆåŠŸç»‘å®šã€‚");
      } else {
        logger.warn(funcName, "æœªæ‰¾åˆ° #theme-toggle æŒ‰é’®å…ƒç´ ï¼Œäº‹ä»¶ç»‘å®šå¤±è´¥ã€‚");
      }
    });
    __expose({
      updateTheme
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)(external_Vue_namespaceObject.Fragment, null, [ (0, 
    external_Vue_namespaceObject.createCommentVNode)(" ä¸»é¢˜åˆ‡æ¢æŒ‰é’® "), (0, external_Vue_namespaceObject.createElementVNode)("button", {
      id: "theme-toggle",
      class: "theme-toggle",
      "aria-label": ariaLabel.value,
      title: title.value,
      "aria-pressed": isDark.value
    }, (0, external_Vue_namespaceObject.toDisplayString)(icon.value), 9, ThemeTogglevue_type_script_setup_true_lang_ts_hoisted_1) ], 2112));
  }
});

const ThemeToggle_exports_ = (0, exportHelper.A)(ThemeTogglevue_type_script_setup_true_lang_ts, [ [ "__scopeId", "data-v-3137ed48" ] ]);

const ThemeToggle = ThemeToggle_exports_;

const appvue_type_script_setup_true_lang_ts_hoisted_1 = {
  id: "status-container",
  class: "status-ui-container"
};

const appvue_type_script_setup_true_lang_ts_hoisted_2 = {
  id: "status-duo",
  class: "status-duo"
};

const appvue_type_script_setup_true_lang_ts_hoisted_3 = {
  class: "status-main-content"
};

const appvue_type_script_setup_true_lang_ts = (0, external_Vue_namespaceObject.defineComponent)({
  __name: "app",
  setup(__props, {expose: __expose}) {
    const themeToggle = (0, external_Vue_namespaceObject.ref)(null);
    const userState = (0, external_Vue_namespaceObject.ref)(null);
    const ayaNews = (0, external_Vue_namespaceObject.ref)(null);
    const statusBanner = (0, external_Vue_namespaceObject.ref)(null);
    const statusTabContent = (0, external_Vue_namespaceObject.ref)(null);
    const roleRibbon = (0, external_Vue_namespaceObject.ref)(null);
    __expose({
      themeToggle,
      userState,
      ayaNews,
      statusBanner,
      statusTabContent,
      roleRibbon
    });
    return (_ctx, _cache) => ((0, external_Vue_namespaceObject.openBlock)(), (0, external_Vue_namespaceObject.createElementBlock)("div", appvue_type_script_setup_true_lang_ts_hoisted_1, [ (0, 
    external_Vue_namespaceObject.createCommentVNode)(" â–¼ æ–°å¢ï¼šå³ä¸Šè§’ä¸»é¢˜åˆ‡æ¢æŒ‰é’® "), (0, external_Vue_namespaceObject.createVNode)(ThemeToggle, {
      ref_key: "themeToggle",
      ref: themeToggle
    }, null, 512), (0, external_Vue_namespaceObject.createCommentVNode)(" â–² æ–°å¢ "), (0, 
    external_Vue_namespaceObject.createElementVNode)("div", appvue_type_script_setup_true_lang_ts_hoisted_2, [ (0, 
    external_Vue_namespaceObject.createVNode)(UserStateContainer, {
      ref_key: "userState",
      ref: userState
    }, null, 512), (0, external_Vue_namespaceObject.createVNode)(AyaNewsContainer, {
      ref_key: "ayaNews",
      ref: ayaNews
    }, null, 512) ]), (0, external_Vue_namespaceObject.createElementVNode)("div", appvue_type_script_setup_true_lang_ts_hoisted_3, [ (0, 
    external_Vue_namespaceObject.createVNode)(RoleRibbonContainer, {
      ref_key: "roleRibbon",
      ref: roleRibbon
    }, null, 512), (0, external_Vue_namespaceObject.createVNode)(StatusBannerContent, {
      ref_key: "statusBanner",
      ref: statusBanner
    }, null, 512), (0, external_Vue_namespaceObject.createCommentVNode)(" â–¼ [é‡æ„] é€‰é¡¹å¡åŒºåŸŸå·²è¢«å°è£…åˆ° StatusTabContent ç»„ä»¶ä¸­ "), (0, 
    external_Vue_namespaceObject.createVNode)(StatusTabContent, {
      ref_key: "statusTabContent",
      ref: statusTabContent
    }, null, 512), (0, external_Vue_namespaceObject.createCommentVNode)(" â–² [é‡æ„] ") ]) ]));
  }
});

const app_exports_ = appvue_type_script_setup_true_lang_ts;

const _app = app_exports_;

$(() => {
  const app = (0, external_Vue_namespaceObject.createApp)(_app);
  const appInstance = app.mount("#app");
  window.vueApp = appInstance;
  const logger = new Logger("å¹»æƒ³ä¹¡ç¼˜èµ·-ä¸»é¡µé¢");
  eventOn("GSKO:showUI", detail => {
    const funcName = "onShowUI";
    try {
      logContext.mk = String(detail?.mk || "");
    } catch {
      logContext.mk = "";
    }
    logger.log(funcName, "æ¥æ”¶åˆ° GSKO:showUI äº‹ä»¶", detail);
    if (detail?.actions?.apiWrite === true) {
      logger.log(funcName, "æ£€æµ‹åˆ° apiWrite è§¦å‘çš„äº‹ä»¶ï¼Œå·²è·³è¿‡ã€‚");
      return;
    }
    logger.debug(funcName, "GSKO:showUI äº‹ä»¶çš„å®Œæ•´å‚æ•°ï¼š", detail);
    try {
      const {statWithoutMeta, runtime} = detail || {};
      if (!statWithoutMeta) {
        logger.warn(funcName, "äº‹ä»¶ä¸­æœªæ‰¾åˆ° statWithoutMetaï¼Œæ— æ³•æ›´æ–° UIã€‚");
        return;
      }
      if (!runtime) {
        logger.warn(funcName, "äº‹ä»¶ä¸­æœªæ‰¾åˆ° runtime å¯¹è±¡ï¼Œæµç¨‹å¯èƒ½å‡ºé”™ã€‚");
      }
      const context = {
        statWithoutMeta,
        runtime
      };
      logger.debug(funcName, "åˆ›å»ºçš„ä¸Šä¸‹æ–‡å¯¹è±¡:", context);
      const userData = get(statWithoutMeta, ERA_VARIABLE_PATH.USER_DATA, {});
      logger.debug(funcName, "æå–åˆ°çš„ userData:", userData);
      const {themeToggle, userState, statusBanner, ayaNews, statusTabContent, roleRibbon} = appInstance;
      try {
        if (themeToggle && typeof themeToggle.updateTheme === "function") {
          logger.debug(funcName, "è°ƒç”¨ ThemeToggle.updateTheme å…¥å£");
          themeToggle.updateTheme(context);
          logger.debug(funcName, "ThemeToggle.updateTheme é€€å‡º");
        } else {
          logger.warn(funcName, "ThemeToggle ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "ThemeToggle.updateTheme æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
      try {
        if (userState && typeof userState.updateUserStatus === "function") {
          logger.debug(funcName, "è°ƒç”¨ UserState.updateUserStatus å…¥å£");
          userState.updateUserStatus(userData);
          logger.debug(funcName, "UserState.updateUserStatus é€€å‡º");
        } else {
          logger.warn(funcName, "UserState ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "UserState.updateUserStatus æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
      try {
        if (statusBanner && typeof statusBanner.update === "function") {
          logger.debug(funcName, "è°ƒç”¨ StatusBanner.update å…¥å£");
          statusBanner.update(context);
          logger.debug(funcName, "StatusBanner.update é€€å‡º");
        } else {
          logger.warn(funcName, "StatusBanner ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "StatusBanner.update æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
      try {
        if (ayaNews && typeof ayaNews.updateNews === "function") {
          logger.debug(funcName, "è°ƒç”¨ AyaNews.updateNews å…¥å£");
          ayaNews.updateNews(context);
          logger.debug(funcName, "AyaNews.updateNews é€€å‡º");
        } else {
          logger.warn(funcName, "AyaNews ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "AyaNews.updateNews æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
      try {
        if (statusTabContent && typeof statusTabContent.update === "function") {
          logger.log(funcName, "æ­£åœ¨è°ƒç”¨ StatusTabContent.update...");
          statusTabContent.update(context);
          logger.debug(funcName, "StatusTabContent.update è°ƒç”¨å®Œæˆ");
        } else {
          logger.warn(funcName, "StatusTabContent ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "StatusTabContent.update æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
      try {
        if (roleRibbon && typeof roleRibbon.updateRibbon === "function") {
          logger.log(funcName, "æ­£åœ¨è°ƒç”¨ RoleRibbon.updateRibbon...");
          roleRibbon.updateRibbon(context);
          logger.debug(funcName, "RoleRibbon.updateRibbon è°ƒç”¨å®Œæˆ");
        } else {
          logger.warn(funcName, "RoleRibbon ç»„ä»¶ç¼ºå¤±æˆ–æ¥å£ä¸å¯ç”¨ã€‚");
        }
      } catch (e) {
        logger.warn(funcName, "RoleRibbon.updateRibbon æ‰§è¡Œå¤±è´¥ï¼ˆéè‡´å‘½ï¼‰ã€‚", e);
      }
    } catch (e) {
      logger.error(funcName, "GSKO:showUI å¤„ç†è¿‡ç¨‹å‡ºç°æœªæ•è·å¼‚å¸¸", e);
    } finally {
      logContext.mk = "";
    }
  });
});</script><style>@import url(https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap);
h4[data-v-7256a290]{display:flex;align-items:center;font-size:1.1em;color:var(--muted);margin:0 0 10px}h4 .emoji[data-v-7256a290]{margin-right:8px;font-size:1.1em}.preserve-format[data-v-7256a290]{white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word;line-height:1.6;font-size:.95em}hr.dashed[data-v-7256a290]{border:none;border-top:1px dashed var(--line);margin:20px 0}
.styled-progress-bar[data-v-0390f826]{background:var(--bar-bg);border:1px solid var(--line);border-radius:5px;overflow:hidden;position:relative;flex-grow:1}.styled-progress-bar.size-large[data-v-0390f826]{height:10px}.styled-progress-bar.size-small[data-v-0390f826]{height:8px;max-width:80px}.styled-progress-bar .val[data-v-0390f826]{position:absolute;top:0;bottom:0;height:100%;width:0%;background:linear-gradient(90deg,#c0a58a,#8c7b6a);transition:width .3s ease}.styled-progress-bar.rtl .val[data-v-0390f826]{left:auto;right:0}.styled-progress-bar.negative .val[data-v-0390f826]{background:#b00020}.styled-progress-bar.very-hate .val[data-v-0390f826]{background:#000}.styled-progress-bar.very-love .val[data-v-0390f826]{background:linear-gradient(90deg,#7e3ff2,#c084fc)}
.affection-display[data-v-1ee196a8]{width:100%}.info-line[data-v-1ee196a8]{display:flex;align-items:center;gap:8px;font-size:.9em;margin-bottom:4px}.aff-stage[data-v-1ee196a8]{font-size:.9em;color:var(--muted);margin-left:auto}
.GensokyoOrigin-Particle{position:absolute;line-height:1;-webkit-user-select:none;user-select:none;opacity:0;filter:drop-shadow(0 0 6px rgba(0,0,0,0.25));animation:GensokyoOrigin-Particle-pop 1.2s ease-out forwards;font-size:16px}@keyframes GensokyoOrigin-Particle-pop{0%{transform:translate(0,0) scale(0.8) rotate(0deg);opacity:0}20%{opacity:1}100%{transform:translate(var(--dx,0),var(--dy,-40px)) scale(1.1) rotate(var(--rot,0deg));opacity:0}}.GensokyoOrigin-Particle--heart{color:#b65ff7;text-shadow:0 0 8px rgba(182,95,247,.7),0 0 4px hsla(0,0%,100%,.8)}.GensokyoOrigin-Particle--skull{color:#222;text-shadow:0 0 6px rgba(0,0,0,.5),0 0 3px #fff}:root[data-theme=dark] .GensokyoOrigin-Particle--skull{color:#714f4f;text-shadow:0 0 7px rgba(185,88,88,.7),0 0 3px rgba(255,210,210,.8)}
.particle-emitter-root{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}
.GensokyoOrigin-ContentOthers-debug-toolbar{display:flex;align-items:center;gap:8px;margin-bottom:10px;flex-wrap:wrap}.GensokyoOrigin-ContentOthers-debug-switch{display:flex;align-items:center;gap:6px;font-size:.9em;padding:4px 8px;border:1px dashed var(--line);border-radius:6px;background:hsla(0,0%,100%,.08)}.GensokyoOrigin-ContentOthers-incident-list{display:flex;flex-direction:column;gap:12px}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card{flex:1 1 auto;min-width:0;background:var(--bg);border:1px solid var(--line);border-radius:6px;padding:var(--pad);position:relative;overflow:hidden;transition:box-shadow .2s ease,transform .02s ease}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card-header{display:flex;align-items:center;gap:10px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px dashed var(--line)}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card-header>div:nth-child(2){flex:1 1 auto;min-width:0}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-avatar{width:40px;height:40px;border-radius:50%;border:1px solid var(--line);background:var(--avatar-bg);display:grid;place-items:center;font-weight:700;color:var(--muted);flex-shrink:0}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-name{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-meta{font-size:.85em;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-card-toggle{margin-left:auto;border:1px solid var(--line);background:var(--paper);border-radius:6px;padding:4px 8px;font-weight:700;cursor:pointer;flex:0 0 auto}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-body{margin-top:8px;border-top:1px dashed var(--line);padding-top:8px;position:relative}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-line{margin:6px 0;font-size:.9em;display:flex;flex-wrap:wrap}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card.collapsed{padding-bottom:8px}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card.collapsed .GensokyoOrigin-ContentOthers-role-body{display:none}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card.collapsed .GensokyoOrigin-ContentOthers-role-card-header{margin-bottom:0;padding-bottom:6px}.GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card.expanded{padding-bottom:calc(var(--pad) + 8px);box-shadow:0 2px 12px rgba(0,0,0,.06);max-height:none;overflow:visible}:root[data-theme=dark] .GensokyoOrigin-ContentOthers-debug-switch{background:hsla(0,0%,100%,.05)}:root[data-theme=dark] .GensokyoOrigin-ContentOthers-incident-list .GensokyoOrigin-ContentOthers-role-card.expanded{box-shadow:0 2px 12px rgba(0,0,0,.35)}
[data-v-851a0cc6] [data-path]{background:rgba(255,247,232,.06);border:1px dashed var(--line);border-radius:8px;padding:10px 12px;margin:10px 0}[data-v-851a0cc6] input[type="text"],[data-v-851a0cc6] input[type="number"],[data-v-851a0cc6] textarea,[data-v-851a0cc6] select{width:100%;background:var(--control-bg);border:1px solid var(--control-border);border-radius:6px;padding:9px 11px;font-size:14px;color:var(--ink);box-shadow:0 1px 0 rgba(0,0,0,.03) inset}[data-v-851a0cc6] input:focus,[data-v-851a0cc6] textarea:focus,[data-v-851a0cc6] select:focus{outline:none;border-color:var(--control-focus);box-shadow:0 0 0 3px color-mix(in srgb,var(--control-focus) 28%,transparent)}[data-v-851a0cc6] input[type="checkbox"]{accent-color:var(--control-focus)}[data-v-851a0cc6] button{cursor:pointer;border:1px solid rgba(0,0,0,0);border-radius:6px;padding:10px 14px;font-weight:700;background:var(--btn-accent);color:#fff;transition:background .2s,box-shadow .2s,border-color .2s,transform .02s}[data-v-851a0cc6] button:hover{background:var(--btn-accent-hover)}[data-v-851a0cc6] button:active{transform:translateY(1px)}[data-v-851a0cc6] .muted-btn{background:var(--btn-muted);color:var(--muted);border-color:var(--btn-muted-border)}[data-v-851a0cc6] .muted-btn:hover{filter:brightness(0.97)}[data-v-851a0cc6] details{border:1px solid var(--line);border-radius:8px;background:var(--paper);margin:10px 0;padding:8px 10px 10px}[data-v-851a0cc6] summary{font-weight:700;color:var(--muted);background:color-mix(in srgb,var(--paper) 88%,black 0%);border-radius:6px;padding:6px 8px;cursor:pointer;-webkit-user-select:none;user-select:none}[data-v-851a0cc6] details[open]>summary{background:color-mix(in srgb,var(--paper) 78%,black 0%)}[data-v-851a0cc6] #cfg_status{display:inline-flex;align-items:center;gap:6px;padding:2px 10px;border:1px solid color-mix(in srgb,var(--control-focus) 35%,white 65%);background:color-mix(in srgb,var(--control-focus) 10%,white 90%);color:color-mix(in srgb,var(--control-focus) 70%,black 30%);border-radius:999px;font-weight:700;line-height:1.8}
#content_incidents h4[data-v-14370179]{display:flex;align-items:center;margin:0 0 15px;padding-bottom:10px;line-height:1;font-size:1.1em;color:var(--muted);border-bottom:1px solid var(--line)}#content_incidents .emoji[data-v-14370179]{font-size:1em;line-height:1;margin-right:8px}#incident-toolbar[data-v-14370179]{margin-bottom:15px}.debug-select[data-v-14370179],.debug-switch[data-v-14370179]{display:flex;align-items:center;gap:6px;font-size:.9em;padding:4px 8px;border:1px dashed var(--line);border-radius:6px;background:color-mix(in srgb,var(--paper) 50%,var(--bg) 50%)}:root[data-theme="dark"],:root[data-theme="dark"]{background:hsla(0,0%,100%,.05)}.incident-list[data-v-14370179]{display:flex;flex-direction:column;gap:12px}.incident-list[data-v-14370179] .role-card{background:var(--bg);border:1px solid var(--line);border-radius:6px;padding:var(--pad);overflow:hidden}.incident-list[data-v-14370179] .role-card .role-card-header{display:flex;align-items:center;gap:10px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px dashed var(--line)}.incident-list[data-v-14370179] .role-card .role-avatar{width:40px;height:40px;border-radius:50%;border:1px solid var(--line);background:var(--avatar-bg);display:grid;place-items:center;font-weight:700;color:var(--muted)}.incident-list[data-v-14370179] .role-card .role-name{font-weight:700}.incident-list[data-v-14370179] .role-card .role-meta{font-size:.85em;color:var(--muted)}.incident-list[data-v-14370179] .role-card .role-line{margin:6px 0;font-size:.9em}
.ascii-map[data-v-7467c71a]{margin:10px 0;padding:12px;border:1px solid var(--line);border-radius:6px;background:var(--paper);color:var(--ink);line-height:1.35;white-space:pre;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:13.5px}.ascii-map .map-loading[data-v-7467c71a]{color:var(--muted)}.map-toolbar[data-v-7467c71a]{display:flex;align-items:center;gap:6px;margin:6px 0 10px}.map-legend[data-v-7467c71a]{display:flex;align-items:center;gap:12px;font-size:.85em;color:var(--muted)}.map-legend .swatch[data-v-7467c71a]{display:inline-block;width:12px;height:12px;border-radius:3px;border:1px solid var(--line);vertical-align:middle;margin-right:6px}.swatch-hit[data-v-7467c71a]{background:linear-gradient(90deg,#ffa94d,#ffd27f)}.swatch-near[data-v-7467c71a]{background:linear-gradient(90deg,#8ec5ff,#d6e9ff)}[data-v-7467c71a] .map-hit{background:linear-gradient(90deg,#ffa94d,#ffd27f);border-radius:4px;padding:0 3px;box-decoration-break:clone;-webkit-box-decoration-break:clone;text-shadow:0 0 1px rgba(0,0,0,.35);outline:1px solid rgba(120,60,0,.35);box-shadow:0 0 0 1px rgba(255,170,90,.45) inset,0 0 0 3px rgba(255,230,180,.9) inset,0 0 18px rgba(255,140,40,.75);animation:mapPulse-7467c71a 1.2s ease-in-out infinite}[data-v-7467c71a] .map-hit.paused{animation:none}@keyframes mapPulse-7467c71a{0%{box-shadow:0 0 0 1px rgba(255,170,90,.35) inset,0 0 0 2px rgba(255,220,170,.7) inset,0 0 10px rgba(255,150,60,.35)}50%{box-shadow:0 0 0 1px rgba(255,170,90,.6) inset,0 0 0 4px #ffebbe inset,0 0 20px rgba(255,140,40,.9)}100%{box-shadow:0 0 0 1px rgba(255,170,90,.35) inset,0 0 0 2px rgba(255,220,170,.7) inset,0 0 10px rgba(255,150,60,.35)}}[data-v-7467c71a] .map-near{background:linear-gradient(90deg,#8ec5ff,#d6e9ff);border-radius:3px;padding:0 2px;box-decoration-break:clone;-webkit-box-decoration-break:clone;text-shadow:0 0 .8px rgba(0,0,0,.25);outline:1px solid rgba(4,62,130,.25);box-shadow:0 0 0 1px rgba(110,160,220,.35) inset,0 0 8px rgba(120,170,230,.45)}.ascii-map.dim-others[data-v-7467c71a]{color:#7d6d5f}[data-v-7467c71a] .ascii-map.dim-others .map-hit{color:#2b1e12}:root[data-theme="dark"]{background:var(--paper);color:var(--ink)}@media (max-width:768px){.ascii-map[data-v-7467c71a]{font-size:12.5px}}
.font-size-controls[data-v-7fbcf727]{display:flex;justify-content:flex-end;gap:6px;margin-bottom:10px}.font-size-btn[data-v-7fbcf727]{width:28px;height:28px;border:1px solid var(--line);background:var(--paper);border-radius:4px;cursor:pointer;font-weight:700}
.status-tabs[data-v-85b52c0a]{display:flex;gap:8px;border-bottom:1px solid var(--line);background:var(--paper);padding:0 15px;overflow:auto hidden;-webkit-overflow-scrolling:touch;scroll-snap-type:x proximity}.status-tabs button[data-v-85b52c0a]{padding:12px 16px;cursor:pointer;font-size:.95em;color:var(--muted);border:none;background:none;border-bottom:3px solid rgba(0,0,0,0);margin-bottom:-1px;flex:0 0 auto;scroll-snap-align:start}.status-tabs button.active[data-v-85b52c0a]{color:var(--ink);border-bottom-color:var(--tab-active);font-weight:700}.status-tab-content-area[data-v-85b52c0a]{flex:1;overflow:auto;padding:20px}.status-tab-content[data-v-85b52c0a]{display:none;line-height:1.6;font-size:.95em}.status-tab-content.active[data-v-85b52c0a]{display:block}:root[data-theme="dark"]{color:var(--muted)}:root[data-theme="dark"]{color:var(--ink)}@media (max-width:768px){.status-tab-content-area[data-v-85b52c0a]{padding:15px}}[data-v-85b52c0a] .font-size-controls{display:flex;justify-content:flex-end;gap:6px;margin-bottom:10px}[data-v-85b52c0a] .font-size-btn{width:28px;height:28px;border:1px solid var(--line);background:var(--paper);border-radius:4px;cursor:pointer;font-weight:700}[data-v-85b52c0a] .incident-list{display:flex;flex-direction:column;gap:12px}
.GensokyoOrigin-RoleCard-wrapper{position:relative;flex:0 0 220px;min-width:0;background:var(--bg);border:1px solid var(--line);border-radius:6px;padding:10px;scroll-snap-align:start;cursor:pointer;transition:background .2s ease}.GensokyoOrigin-RoleCard-wrapper:hover{background:color-mix(in srgb,var(--bg) 90%,var(--ink) 10%)}.GensokyoOrigin-RoleCard-header{display:flex;align-items:center;gap:10px;margin-bottom:8px;padding-bottom:8px;border-bottom:1px dashed var(--line)}.GensokyoOrigin-RoleCard-avatar{width:36px;height:36px;border-radius:50%;border:1px solid var(--line);background:var(--avatar-bg);display:grid;place-items:center;font-weight:700;color:var(--muted);flex-shrink:0}.GensokyoOrigin-RoleCard-name{font-weight:700;font-size:.95em}.GensokyoOrigin-RoleCard-meta{font-size:.8em;color:var(--muted)}
.GensokyoOrigin-RoleDetailPopup-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.GensokyoOrigin-RoleDetailPopup-popup{position:relative;width:90vw;max-width:600px;max-height:80vh;overflow-y:auto;background:var(--paper);border:1px solid var(--line);border-radius:12px;padding:24px;box-shadow:0 8px 24px rgba(0,0,0,.2)}.GensokyoOrigin-RoleDetailPopup-close-btn{position:absolute;top:12px;right:12px;width:30px;height:30px;border:none;background:rgba(0,0,0,0);font-size:24px;cursor:pointer;color:var(--muted)}.GensokyoOrigin-RoleDetailPopup-header{display:flex;align-items:center;gap:16px;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--line)}.GensokyoOrigin-RoleDetailPopup-avatar{width:60px;height:60px;border-radius:50%;border:1px solid var(--line);background:var(--avatar-bg);display:grid;place-items:center;font-size:24px;font-weight:700;color:var(--muted);flex-shrink:0}.GensokyoOrigin-RoleDetailPopup-name{font-size:1.5em;font-weight:700}.GensokyoOrigin-RoleDetailPopup-meta{font-size:1em;color:var(--muted)}.GensokyoOrigin-RoleDetailPopup-details-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}.GensokyoOrigin-RoleDetailPopup-detail-item{background:var(--bg);padding:8px;border-radius:4px;font-size:.95em}.GensokyoOrigin-RoleDetailPopup-detail-item strong{color:var(--muted);margin-right:8px}.GensokyoOrigin-RoleDetailPopup-detail-item.full-width{grid-column:1/-1}
.role-ribbon-container[data-v-8ed81600]{position:relative;background:var(--paper);border-bottom:1px solid var(--line);padding:10px 40px;max-width:100%;overflow-x:hidden}.role-ribbon[data-v-8ed81600]{display:flex;gap:12px;overflow:auto hidden;scroll-snap-type:x proximity;padding-bottom:6px}.ribbon-arrow[data-v-8ed81600]{position:absolute;top:50%;transform:translateY(-50%);width:26px;height:26px;display:grid;place-items:center;border:1px solid var(--line);background:var(--bg);border-radius:4px;cursor:pointer;z-index:10}.ribbon-arrow.left[data-v-8ed81600]{left:8px}.ribbon-arrow.right[data-v-8ed81600]{right:8px}.role-card-placeholder[data-v-8ed81600]{flex:0 0 260px;padding:16px;background:var(--bg);border:1px dashed var(--line);border-radius:6px;color:var(--muted);display:grid;place-items:center}
.emoji[data-v-37a35e60]{margin-right:0;font-size:1.1em}.banner-chip[data-v-37a35e60]{display:inline-flex;align-items:center;gap:.5em;padding:6px 10px;background:color-mix(in srgb,var(--paper) 90%,var(--tab-active) 10%);border:1px solid var(--line);border-radius:999px;font-weight:700;color:var(--ink);cursor:pointer;-webkit-user-select:none;user-select:none;transition:transform .08s ease,box-shadow .12s ease,background .2s ease}.banner-chip[data-v-37a35e60]:hover{box-shadow:0 2px 10px rgba(0,0,0,.06)}.banner-chip[data-v-37a35e60]:active{transform:translateY(1px) scale(0.99)}
.banner-chip-open[data-v-a8d897e6]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 16px;background:var(--tab-active);border:1px solid var(--line);border-top-left-radius:10px;border-top-right-radius:10px;font-weight:700;color:var(--ink-bright);cursor:pointer;-webkit-user-select:none;user-select:none}.emoji[data-v-a8d897e6]{font-size:1.2em;margin-right:8px}.close-icon[data-v-a8d897e6]{font-size:.9em;color:var(--ink)}
.cal-day-container[data-v-35064b7e]{position:relative;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;aspect-ratio:1/1;min-width:0;min-height:0}.cal-day-btn[data-v-35064b7e]{width:100%;height:100%;padding:6px;border:1px solid var(--line);border-radius:8px;background:var(--paper);cursor:pointer;-webkit-user-select:none;user-select:none;transition:background .2s ease,box-shadow .2s ease,transform .06s ease}.cal-day-btn[data-v-35064b7e]:hover{background:color-mix(in srgb,var(--paper) 92%,black 8%)}.cal-day-btn[data-v-35064b7e]:active{transform:translateY(1px)}.cal-day-btn.today[data-v-35064b7e]{outline:2px solid var(--tab-active);outline-offset:0;box-shadow:0 0 0 2px color-mix(in srgb,var(--tab-active) 35%,transparent) inset}.cal-day-btn.has-fest[data-v-35064b7e]{--fest-color:color-mix(in srgb,var(--tab-active) calc(var(--importance,1) * 20%),transparent);background:color-mix(in srgb,var(--fest-color) 50%,var(--paper) 50%);border-color:var(--fest-color)}.cal-day-btn[data-importance="5"][data-v-35064b7e]{--importance:5}.cal-day-btn[data-importance="4"][data-v-35064b7e]{--importance:4}.cal-day-btn[data-importance="3"][data-v-35064b7e]{--importance:3}.cal-day-btn[data-importance="2"][data-v-35064b7e]{--importance:2}.cal-day-btn[data-importance="1"][data-v-35064b7e]{--importance:1}.dnum[data-v-35064b7e]{font-weight:800;color:var(--ink);text-align:right;line-height:1}.cal-day-placeholder[data-v-35064b7e]{width:100%;height:100%;border-radius:8px;background:color-mix(in srgb,var(--paper) 95%,black 5%)}.fest-popover[data-v-35064b7e]{position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);width:250px;padding:12px;background:var(--bg);border:1px solid var(--line);border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.1);z-index:10;pointer-events:none;display:flex;flex-direction:column;gap:8px}.fest-item[data-v-35064b7e]{border-top:1px solid var(--line);padding-top:8px}.fest-item[data-v-35064b7e]:first-child{border-top:none;padding-top:0}.fest-header[data-v-35064b7e]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:6px}.fest-header strong[data-v-35064b7e]{font-weight:bold;color:var(--ink-bright)}.fest-host[data-v-35064b7e]{font-size:.85em;color:var(--muted)}.fest-customs[data-v-35064b7e]{list-style-type:disc;padding-left:20px;margin:0;font-size:.9em;color:var(--ink);display:flex;flex-direction:column;gap:4px}
.cal-content[data-v-03881b10]{position:static;width:100%;max-height:none;margin-top:-1px;padding:12px;background:var(--paper);border:1px solid var(--line);border-top:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;box-shadow:none;overflow:visible}.cal-head[data-v-03881b10]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}.cal-title[data-v-03881b10]{display:flex;align-items:baseline;gap:.5em;color:var(--ink)}.cal-title .month[data-v-03881b10]{font-size:1.25em;font-weight:800}.cal-title .year[data-v-03881b10]{font-size:.95em;color:var(--muted)}.cal-nav[data-v-03881b10]{display:flex;gap:6px}.cal-btn[data-v-03881b10]{cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid var(--line);background:var(--paper);border-radius:8px;padding:6px 10px;font-weight:700}.cal-btn[data-v-03881b10]:active{transform:translateY(1px)}.cal-body[data-v-03881b10]{padding:10px 12px 12px}.cal-week[data-v-03881b10]{display:grid;grid-template-columns:repeat(7,minmax(0,1fr));gap:6px;margin-bottom:6px;color:var(--muted);font-weight:700}.cal-week .w[data-v-03881b10]{text-align:center;padding:4px 0;border-bottom:1px dashed var(--line)}.cal-grid[data-v-03881b10]{display:grid;grid-template-columns:repeat(7,minmax(0,1fr));gap:6px;align-items:stretch;position:relative}
.time-container[data-v-66815921]{position:relative}

.banner-chip[data-v-11b37370]{display:inline-flex;align-items:center;gap:.5em;padding:6px 10px;background:color-mix(in srgb,var(--paper) 90%,var(--tab-active) 10%);border:1px solid var(--line);border-radius:999px;font-weight:700;color:var(--ink);cursor:pointer;-webkit-user-select:none;user-select:none;transition:transform .08s ease,box-shadow .12s ease,background .2s ease}.banner-chip[data-v-11b37370]:hover{box-shadow:0 2px 10px rgba(0,0,0,.06)}.banner-chip[data-v-11b37370]:active{transform:translateY(1px) scale(0.99)}.emoji[data-v-11b37370]{margin-right:0;font-size:1.1em}
.banner-chip-open[data-v-1a6d77c8]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px 16px;background:var(--tab-active);border:1px solid var(--line);border-top-left-radius:10px;border-top-right-radius:10px;font-weight:700;color:var(--ink-bright);cursor:pointer;-webkit-user-select:none;user-select:none}.emoji[data-v-1a6d77c8]{font-size:1.2em;margin-right:8px}.close-icon[data-v-1a6d77c8]{font-size:.9em;color:var(--ink)}
.weather-content[data-v-16c06ed4]{position:static;width:100%;padding:16px;background:var(--paper);border:1px solid var(--line);border-top:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;color:var(--ink)}p[data-v-16c06ed4]{margin:4px 0}em[data-v-16c06ed4]{color:var(--muted);font-size:.9em}
.weather-container[data-v-cb64d90a]{position:relative}

.emoji[data-v-d441cb92]{margin-right:8px;font-size:1.1em}.status-banner[data-v-d441cb92]{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin:8px 10px 6px;padding:10px 12px;background:var(--paper);border:1px solid var(--line);border-radius:10px;box-shadow:0 1px 0 rgba(0,0,0,.03),0 6px 18px rgba(0,0,0,.05);position:relative}.status-banner .banner-title[data-v-d441cb92]{display:flex;align-items:center;gap:8px;color:var(--muted);font-weight:700;margin-right:6px}.status-banner .banner-title .emoji[data-v-d441cb92]{margin-right:0}.banner-sep[data-v-d441cb92]{width:1px;height:18px;background:var(--line);align-self:center;margin:0 2px}:root[data-theme="dark"]{box-shadow:0 1px 0 rgba(0,0,0,.1),0 6px 18px rgba(0,0,0,.2)}
.aya-news-button-closed[data-v-b15bd7b0]{padding:8px 12px;border:1px solid var(--line);border-radius:4px;background-color:var(--bg);color:var(--ink);cursor:pointer;width:100%}.aya-news-button-closed[data-v-b15bd7b0]:hover{background-color:var(--paper)}
.aya-news-button-open[data-v-4b56fc8f]{padding:12px 14px;border:1px solid var(--line);border-bottom-left-radius:0;border-bottom-right-radius:0;background-color:var(--bg);color:var(--ink);cursor:pointer;width:100%;box-shadow:0 2px 0 var(--line) inset;transition:padding .15s ease}.aya-news-button-open[data-v-4b56fc8f]:hover{background-color:var(--paper)}
.aya-news-popup[data-v-36e7fa95]{width:100%;max-height:60vh;overflow:auto;padding:16px 20px;background:var(--paper);border:1px solid var(--line);border-top:none;border-bottom-left-radius:10px;border-bottom-right-radius:10px;box-shadow:0 8px 16px rgba(0,0,0,.05);display:flex;flex-direction:column;gap:10px}#aya-news-popup h4[data-v-36e7fa95]{display:flex;align-items:center;height:var(--duo-head-h);margin:0 0 10px;padding:0;line-height:1;font-size:1.1em;color:var(--muted);border-bottom:1px solid var(--line)}#aya-news-popup h4 .emoji[data-v-36e7fa95]{font-size:1em;line-height:1;display:inline-grid;place-items:center;width:1.25em;height:1.25em;margin-right:8px}.news-body[data-v-36e7fa95]{flex:1 1 auto;min-height:0;background:var(--bg);border:1px solid var(--line);border-radius:6px;padding:10px;overflow:auto;white-space:normal;overflow-wrap:anywhere;word-break:break-word}
.aya-news-container[data-v-313602e6]{position:relative}

.user-state-button-closed[data-v-89abe3c0]{padding:8px 12px;border:1px solid var(--line);border-radius:4px;background-color:var(--bg);color:var(--ink);cursor:pointer;width:100%}.user-state-button-closed[data-v-89abe3c0]:hover{background-color:var(--paper)}
.user-state-button-open[data-v-682280a6]{padding:12px 14px;border:1px solid var(--line);border-bottom-left-radius:0;border-bottom-right-radius:0;background-color:var(--bg);color:var(--ink);cursor:pointer;width:100%;box-shadow:0 2px 0 var(--line) inset;transition:padding .15s ease}.user-state-button-open[data-v-682280a6]:hover{background-color:var(--paper)}
.user-state-popup[data-v-61061915]{position:static;width:100%;max-height:none;margin-top:-1px;padding:16px;background:var(--paper);border:1px solid var(--line);border-top:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;box-shadow:none;display:flex;flex-direction:column}.sidebar-content[data-v-61061915]{overflow:visible}h4[data-v-61061915]{display:flex;align-items:center;height:var(--duo-head-h);margin:0 0 10px;padding:0;line-height:1;font-size:1.1em;color:var(--muted);border-bottom:1px solid var(--line)}h4 .emoji[data-v-61061915]{font-size:1em;line-height:1;display:inline-grid;place-items:center;width:1.25em;height:1.25em;margin-right:8px}p[data-v-61061915]{margin:8px 0;font-size:.9em;line-height:1.5}p>span[data-v-61061915]:last-child{flex:1 1 auto;min-width:0;white-space:normal;overflow-wrap:anywhere;word-break:break-word}
.user-state-container[data-v-182f4ef4]{position:relative}

.theme-toggle[data-v-3137ed48]{position:absolute;top:8px;right:8px;width:34px;height:34px;display:grid;place-items:center;border-radius:8px;border:1px solid var(--line);background:var(--paper);color:var(--muted);font-size:18px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:transform .05s ease,box-shadow .15s ease,background .15s ease,border-color .15s ease;z-index:20}.theme-toggle[data-v-3137ed48]:active{transform:translateY(1px)}.theme-toggle[data-v-3137ed48]:focus-visible{outline:none;box-shadow:0 0 0 3px color-mix(in srgb,var(--control-focus) 25%,transparent);border-color:var(--control-focus)}:root[data-theme="light"],:root:not([data-theme]){box-shadow:0 2px 10px rgba(0,0,0,.05)}:root[data-theme="light"],:root:not([data-theme]){background:color-mix(in srgb,var(--paper) 88%,black 12%)}:root[data-theme="dark"]{border-color:color-mix(in srgb,var(--line) 70%,white 30%);background:color-mix(in srgb,var(--paper) 85%,white 0%);color:var(--ink);box-shadow:0 2px 12px rgba(0,0,0,.35)}:root[data-theme="dark"]{background:color-mix(in srgb,var(--paper) 75%,white 0%)}
.status-ui-container{position:relative;display:flex;flex-direction:column;margin:10px;border:1px solid var(--line);border-radius:4px;overflow-x:hidden;overflow-y:visible;background:var(--bg)}.status-main-content{flex:1;display:flex;flex-direction:column;min-height:0;overflow:visible}.status-duo{display:flex;flex-wrap:nowrap;align-items:flex-start;gap:10px;overflow-x:auto;overflow-y:visible;border-bottom:1px dashed var(--line);padding:12px;margin-bottom:12px;width:100%}@media (min-width:1100px){.status-ui-container{display:grid;grid-template-columns:380px minmax(0,1fr);grid-template-rows:auto;grid-auto-rows:auto}.status-duo{grid-column:1;grid-row:1;flex-direction:column;align-items:stretch;overflow-y:visible;overflow-x:hidden;border-right:1px dashed var(--line);border-bottom:none;padding:12px;margin-bottom:0;max-height:none}.status-main-content{grid-column:2}.status-duo>.user-state-container{flex:0 0 auto;border-right:none;border-bottom:1px solid var(--line)}}@media (max-width:768px){.status-ui-container{flex-direction:column;margin:5px}}
/*! tailwindcss v4.1.15 | MIT License | https://tailwindcss.com */:root{--duo-head-h:38px}*{box-sizing:border-box}body{margin:0;font-family:"Noto Serif SC",serif;color:var(--ink);font-size:14px;background:linear-gradient(var(--grid) 1px,transparent 1px),linear-gradient(90deg,var(--grid) 1px,transparent 1px),var(--bg);background-size:20px 20px}.preserve-format{white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word}.label{font-weight:600;color:var(--muted);min-width:90px;margin-right:5px}hr.dashed{border:none;border-top:1px dashed var(--line);margin:20px 0}html,body,.status-ui-container,.status-main-content,.status-tab-content-area,.role-ribbon-container{max-width:100%;overflow-x:hidden}#content_main,#main-content{max-width:100%;contain:inline-size}#main-content,#main-content *{max-width:100% !important}#main-content img,#main-content video{height:auto}#main-content table{display:block;overflow-x:auto}#main-content pre{white-space:pre-wrap;overflow-x:auto}.debug-console{font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;background:#0f0f0f;color:#e7e7e7;border:1px solid var(--line);border-radius:4px;padding:10px;height:260px;overflow:auto;white-space:pre-wrap;word-break:break-word}.debug-line{padding:2px 0;border-bottom:1px dashed hsla(0,0%,100%,.08)}.debug-badge{font-size:.75em;padding:2px 6px;border-radius:10px;margin-right:6px;background:#333;color:#eee}.debug-line.warn .debug-badge{background:#9b7b2f}.debug-line.error .debug-badge{background:#b2453d}.debug-stats{font-size:.85em;color:#cfcfcf;margin:6px 0 0;opacity:.9}:root,:root[data-theme=light]{--bg:#fffdf7;--paper:#fcfaf5;--ink:#4a3f35;--muted:#6b5a4b;--line:#d3c8b8;--tile:#e0d5c4;--pad:12px;--control-bg:#fff7e8;--control-border:#c9b59e;--control-focus:#b6782b;--btn-accent:#b76e2b;--btn-accent-hover:#a95f1e;--btn-muted:#efe8de;--btn-muted-border:#d3c8b8;--grid:rgba(224,213,196,0.1);--avatar-bg:#f5f1e8;--bar-bg:#f0ece4;--tab-active:#8c7b6a;--cal-cell-bg:var(--bg);--cal-cell-border:var(--line);--cal-hover-bg:var(--paper);@supports (color:color-mix(in lab,red,red)){&{--cal-hover-bg:color-mix(in srgb,var(--paper) 88%,black 12%)}}--cal-festival-bg:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-bg:color-mix(in srgb,var(--btn-accent) 10%,white 90%)}}--cal-festival-border:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-border:color-mix(in srgb,var(--btn-accent) 30%,white 70%)}}--cal-festival-text:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-text:color-mix(in srgb,var(--btn-accent) 75%,black 25%)}}--cal-today-ring:var(--control-focus)}:root[data-theme=dark]{--bg:#13110f;--paper:#1b1916;--ink:#efe8de;--muted:#b7a899;--line:#4b433a;--tile:#2a241e;--pad:12px;--control-bg:#1f1b16;--control-border:#5b4e41;--control-focus:#d89a4a;--btn-accent:#c57a33;--btn-accent-hover:#b56b24;--btn-muted:#2a241e;--btn-muted-border:#4b433a;--grid:rgba(255,255,255,0.04);--avatar-bg:#1f1b17;--bar-bg:#2a2520;--tab-active:#c8b49d;--cal-cell-bg:var(--paper);@supports (color:color-mix(in lab,red,red)){&{--cal-cell-bg:color-mix(in srgb,var(--paper) 92%,black 8%)}}--cal-cell-border:var(--line);@supports (color:color-mix(in lab,red,red)){&{--cal-cell-border:color-mix(in srgb,var(--line) 85%,white 15%)}}--cal-hover-bg:var(--paper);@supports (color:color-mix(in lab,red,red)){&{--cal-hover-bg:color-mix(in srgb,var(--paper) 80%,white 0%)}}--cal-festival-bg:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-bg:color-mix(in srgb,var(--btn-accent) 14%,var(--paper) 86%)}}--cal-festival-border:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-border:color-mix(in srgb,var(--btn-accent) 45%,var(--line) 55%)}}--cal-festival-text:var(--btn-accent);@supports (color:color-mix(in lab,red,red)){&{--cal-festival-text:color-mix(in srgb,var(--btn-accent) 80%,white 20%)}}--cal-today-ring:var(--control-focus)}@media (max-width:480px){.calendar-day .fest{font-size:.75em}}
</style></head><body><div id="app"></div></body></html>