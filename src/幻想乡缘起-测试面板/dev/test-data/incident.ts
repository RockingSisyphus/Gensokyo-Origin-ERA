export const incidentTestData = {
  // =================================================================
  // SCENARIO 1: 前置 - 设置冷却锚点
  // - 目的: 首次运行时，当无异变且无锚点时，应自动以当前 timeProgress 设置锚点。
  // - 预期 runtime.incident.incidentCooldownAnchor 会被设置为 10。
  // =================================================================
  '前置-设置冷却锚点': {
    stat: {
      config: {
        incident: { cooldownMinutes: 100 },
      },
      '世界': { timeProgress: 10 },
      incidents: {},
    },
  },

  // =================================================================
  // SCENARIO 2: 日常 (基于前置)
  // - 目的: 依赖上一步生成的冷却锚点 (10)，判断当前仍处于冷却中。
  // - 预期决策: 'daily'
  // - 预期 runtime.incident.remainingCooldown > 0
  // =================================================================
  '日常(基于前置)': {
    stat: {
      config: {
        incident: { cooldownMinutes: 100 },
      },
      '世界': { timeProgress: 50 }, // 50 - 10 < 100
      incidents: {},
    },
  },

  // =================================================================
  // SCENARIO 3: 触发新异变 (冷却结束)
  // - 目的: 同样依赖前置的锚点 (10)，但此时时间已超过冷却期。
  // - 预期决策: 'start_new'
  // - 预期 stat.incidents 中会新增 '红雾异变'
  // =================================================================
  '触发新异变(冷却结束)': {
    stat: {
      config: {
        incident: {
          cooldownMinutes: 100,
          isRandomPool: false,
          pool: [{ name: '红雾异变', detail: '幻想乡被红色的雾气笼罩了。', mainLoc: ['红魔馆'] }],
        },
      },
      '世界': { timeProgress: 111 }, // 111 - 10 > 100
      incidents: {},
    },
  },

  // =================================================================
  // SCENARIO 4: 触发新异变 (强制)
  // - 预期决策: 'start_new'
  // - 预期无视冷却时间
  // =================================================================
  '触发新异变(强制)': {
    stat: {
      config: {
        incident: {
          cooldownMinutes: 9999,
          forceTrigger: true,
          isRandomPool: false,
          pool: [{ name: '春雪异变', detail: '春天来了，但雪还在下。', mainLoc: ['白玉楼'] }],
        },
      },
      '世界': { timeProgress: 1 },
      incidents: {},
    },
  },

  // =================================================================
  // SCENARIO 5: 推进现有异变
  // - 预期决策: 'continue'
  // - 预期 runtime.incident.current 包含 '红雾异变' 的信息
  // =================================================================
  '推进现有异变': {
    stat: {
      config: {
        incident: {
          pool: [{ name: '红雾异变', detail: '幻想乡被红色的雾气笼罩了。', mainLoc: ['红魔馆'] }],
        },
      },
      '世界': { timeProgress: 200 },
      incidents: {
        '红雾异变': {
          '异变进程': '进行中',
          '异变细节': '天空中弥漫着不祥的红色雾气。',
          '主要地区': ['红魔馆'],
          '异变退治者': ['博丽灵梦', '雾雨魔理沙'],
        },
      },
    },
  },

  // =================================================================
  // SCENARIO 6: 触发随机异变 (池为空)
  // - 预期决策: 'start_new'
  // - 预期 stat.incidents 中会新增一个随机生成的异变
  // - 注意: 此测试需要一个包含 legal_locations 的前置 runtime 状态
  // =================================================================
  '触发随机异变(池为空)': {
    stat: {
      config: {
        incident: {
          cooldownMinutes: 10,
          pool: [],
        },
      },
      '世界': { timeProgress: 15 },
      incidents: {},
    },
  },
};
